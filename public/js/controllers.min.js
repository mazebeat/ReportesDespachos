reportesDespacho.controller("graphsController",["$scope","$http","apiFactory","chartService",function(a,d,c,b){a.date=new Date();a.error=false;d.get("anual").success(function(e){if(e.ok){a.error=true;a.message="";angular.forEach(e.data,function(g,f){if(g.negocio=="FIJA"){a.anualfija=g.total}else{a.anualmovil=g.total}})}else{a.anualfija=0;a.anualmovil=0;a.message=e.message}});d.get("mensual").success(function(e){if(e.ok){a.error=true;a.mensual=e.data;a.message="";angular.forEach(a.anual,function(g,f){if(g.negocio=="FIJA"){a.mensualfija=g.total}else{a.mensualmovil=g.total}})}else{a.mensualfija=0;a.mensualmovil=0;a.message=e.message}});d.get("gAnual").success(function(h){if(h.ok){a.error=true;a.message="";var i=[];var g="";var f="";angular.forEach(h.data,function(k,j){var l=[];if(k.fecha==f&&g!=""){i[(i.length-1)][k.negocio]=parseInt(k.total);g=""}else{g=j;f=k.fecha;l[k.negocio]=parseInt(k.total);l.fecha=c.convertDateStringsToDates("1/"+k.fecha);i.push(l)}});a.gAnual=i;var e=AmCharts.makeChart("gAnual",{type:"serial",pathToImages:"/js/amcharts/images/",categoryField:"fecha",dataDateFormat:"D/M/YYYY",autoMarginOffset:0,marginLeft:19,plotAreaBorderColor:"#FFFFFF",borderColor:"#FFFFFF",fontFamily:"sans-serif",fontSize:10,theme:"none",categoryAxis:{minPeriod:"MM",parseDates:true},chartCursor:{categoryBalloonDateFormat:"DD MMM YYYY"},graphs:[{bullet:"round",columnWidth:0,id:"AmGraph-1",title:"Fija",valueAxis:"ValueAxis-1",valueField:"FIJA"},{bullet:"round",columnWidth:0,id:"AmGraph-2",title:"Movil",valueAxis:"ValueAxis-1",valueField:"MOVIL"}],colors:["#424f63","#e70d2f"],valueAxes:[{id:"ValueAxis-1",title:"Total"}],exportConfig:{menuTop:"0px",menuItems:[{icon:"/js/amcharts/images/export.png",format:"png"}]},balloon:{adjustBorderColor:true,color:"#000000",cornerRadius:5,fillColor:"#FFFFFF"},legend:{useGraphSettings:true},titles:[{color:"#000000",id:"lead",size:15,text:"Totales por mes (Anual)"}],dataProvider:a.gAnual})}else{a.gAnual=[];a.message=h.message}});d.get("gMensualFija").success(function(e){if(e.ok){a.error=true;a.gMensualFija=e.data;a.message=""}else{a.gMensualFija=[{tipodoc:"BO",total:529801},{tipodoc:"FA",total:131410},{tipodoc:"NC",total:17799}];a.message=e.message}b.donut(chartMensualFija,"gMensualFija",a.gMensualFija,"total","tipdoc","tipodoc",null)});d.get("gMensualMovil").success(function(e){if(e.ok){a.error=true;a.gMensualMovil=e.data;a.message=""}else{a.gMensualMovil=[{tipodoc:"23",total:110709},{tipodoc:"53",total:1},{tipodoc:"54",total:1081283},{tipodoc:"72",total:35119}];a.message=e.message}b.donut(chartMensualMovil,"gMensualMovil",a.gMensualMovil,"total","tipdoc","tipodoc",null)})}]);reportesDespacho.controller("homeController",["$scope","$http",function(a,b){}]);