AmCharts.AmExport=AmCharts.Class({construct:function(d,a,f){this.DEBUG=!1;this.chart=d;this.canvas=null;this.svgs=[];this.userCFG=a;this.buttonIcon="export.png";this.exportPNG=!0;this.exportSVG=this.exportJPG=this.exportPDF=!1;this.top=this.right=0;this.buttonRollOverColor="#EFEFEF";this.textRollOverColor="#CC0000";this.buttonTitle="Save chart as an image";this.buttonAlpha=0.75;this.imageFileName="amChart";this.imageBackgroundColor="#FFFFFF";f&&this.init()},toCoordinate:function(a){return void 0===a?"auto":-1!=String(a).indexOf("%")?a:a+"px"},init:function(){var h=this,f=[];h.exportPNG&&f.push("png");h.exportPDF&&f.push("pdf");h.exportJPG&&f.push("jpg");h.exportSVG&&f.push("svg");var k=[];if(1==f.length){k.push({format:f[0],iconTitle:h.buttonTitle,icon:h.chart.pathToImages+h.buttonIcon})}else{if(1<f.length){for(var g=[],j=0;j<f.length;j++){g.push({format:f[j],title:f[j].toUpperCase()})}k.push({onclick:function(){},icon:h.chart.pathToImages+h.buttonIcon,items:g})}}f=h.color;void 0===f&&(f=h.chart.color);g=h.buttonColor;void 0===g&&(g="transparent");h.cfg={menuTop:h.toCoordinate(h.top),menuLeft:h.toCoordinate(h.left),menuRight:h.toCoordinate(h.right),menuBottom:h.toCoordinate(h.bottom),menuItems:k,menuItemStyle:{backgroundColor:g,opacity:h.buttonAlpha,rollOverBackgroundColor:h.buttonRollOverColor,color:f,rollOverColor:h.textRollOverColor,paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none",fontFamily:h.chart.fontFamily,fontSize:h.chart.fontSize+"px"},menuItemOutput:{backgroundColor:h.imageBackgroundColor,fileName:h.imageFileName,format:"png",output:"dataurlnewwindow",render:"browser",dpi:90,onclick:function(e,l,c){c.preventDefault();e.output(l)}},removeImagery:!0};h.processing={buffer:[],drawn:0,timer:0};"undefined"!=typeof window.canvg&&"undefined"!=typeof window.RGBColor&&(h.cfg.menuItemOutput.render="canvg");"undefined"!=typeof window.saveAs&&(h.cfg.menuItemOutput.output="save");AmCharts.isIE&&10>AmCharts.IEversion&&(h.cfg.menuItemOutput.output="dataurlnewwindow");if(k=h.userCFG){k.menuItemOutput=AmCharts.extend(h.cfg.menuItemOutput,k.menuItemOutput||{}),k.menuItemStyle=AmCharts.extend(h.cfg.menuItemStyle,k.menuItemStyle||{}),h.cfg=AmCharts.extend(h.cfg,k)}h.chart.AmExport=h;h.chart.addListener("rendered",function(){h.setup()});h.DEBUG&&(window.AmExport=h)},log:function(){console.log("AmExport: ",arguments)},setup:function(){10==this.DEBUG&&this.log("SETUP START");!AmCharts.isIE||AmCharts.isIE&&9<AmCharts.IEversion?(this.generateButtons(),10==this.DEBUG&&this.log("SETUP END")):10==this.DEBUG&&this.log("< IE10 NOT SUPPORTED")},generateBinaryArray:function(s){for(var v=s.length,u=new Uint8Array(v/4*3|0),w=0,t=0,q=[0,0],o=0,m=0,r,n,j=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);v--;){n=s.charCodeAt(w++),r=j[n-43],255!==r&&void 0!==r&&(q[1]=q[0],q[0]=n,m=m<<6|r,o++,4===o&&(u[t++]=m>>>16,61!==q[1]&&(u[t++]=m>>>8),61!==q[0]&&(u[t++]=m),o=0))}return u},generateBlob:function(k,f){var m="image/svg+xml"!=f?k.indexOf(",")+1:0,h=k.substring(0,m),l=k,j=new Blob;-1!=h.indexOf("base64")&&(l=this.generateBinaryArray(k.substring(m)));AmCharts.isIE&&10>AmCharts.IEversion?(j.data=l,j.size=l.length,j.type=f,j.encoding="base64"):j=new Blob([l],{type:f});return j},generatePDF:function(g){var d={output:function(){return""}},h=this.canvas.toDataURL("image/jpeg"),f=25.4*this.canvas.width/g.dpi;g=25.4*this.canvas.height/g.dpi;window.jsPDF?(d=new jsPDF,d.addImage?d.addImage(h,"JPEG",0,0,f,g):alert("Missing jsPDF plugin; Please add the 'addImage' plugin.")):alert("Missing jsPDF lib; Don't forget to add the addImage plugin.");return d},output:function(d,a){var f=this;d=AmCharts.extend(AmCharts.extend({},f.cfg.menuItemOutput),d||{});f.chart.prepareForExport&&f.chart.prepareForExport();return f.generateOutput(d,function(){var b=null,c;10==f.DEBUG&&f.log("OUTPUT",d.format);if("image/svg+xml"==d.format||"svg"==d.format){b=f.generateSVG(),c=f.generateBlob(b,"image/svg+xml"),"save"==d.output?saveAs(c,d.fileName+".svg"):"datastring"==d.output||"datauristring"==d.output||"dataurlstring"==d.output?c="data:image/svg+xml;base64,"+btoa(b):"dataurlnewwindow"==d.output?window.open("data:image/svg+xml;base64,"+btoa(b)):"datauri"==d.output||"dataurl"==d.output?location.href="data:image/svg+xml;base64,"+btoa(b):"datastream"==d.output&&(location.href="data:image/octet-stream;base64,"+b),a&&a.apply(f,[c])}else{if("application/pdf"==d.format||"pdf"==d.format){b=f.generatePDF(d).output("dataurlstring"),c=f.generateBlob(b,"application/pdf"),"save"==d.output?saveAs(c,d.fileName+".pdf"):"datastring"==d.output||"datauristring"==d.output||"dataurlstring"==d.output?c=b:"dataurlnewwindow"==d.output?window.open(b):"datauri"==d.output||"dataurl"==d.output?location.href=b:"datastream"==d.output&&(location.href=b.replace("application/pdf","application/octet-stream")),a&&a.apply(f,[c])}else{if("image/png"==d.format||"png"==d.format){b=f.canvas.toDataURL("image/png"),c=f.generateBlob(b,"image/png"),"save"==d.output?saveAs(c,d.fileName+".png"):"datastring"==d.output||"datauristring"==d.output||"dataurlstring"==d.output?c=b:"dataurlnewwindow"==d.output?window.open(b):"datauri"==d.output||"dataurl"==d.output?location.href=b:"datastream"==d.output&&(location.href=b.replace("image/png","image/octet-stream")),a&&a.apply(f,[c])}else{if("image/jpeg"==d.format||"jpeg"==d.format||"jpg"==d.format){b=f.canvas.toDataURL("image/jpeg"),c=f.generateBlob(b,"image/jpeg"),"save"==d.output?saveAs(c,d.fileName+".jpg"):"datastring"==d.output||"datauristring"==d.output||"dataurlstring"==d.output?c=b:"dataurlnewwindow"==d.output?window.open(b):"datauri"==d.output||"dataurl"==d.output?location.href=b:"datastream"==d.output&&(location.href=b.replace("image/jpeg","image/octet-stream")),a&&a.apply(f,[c])}}}}})},polifySVG:function(d){function a(j,q){for(var c=j.getElementsByTagName(q),n=c.length;n--;){if(f.cfg.removeImagery){c[n].parentNode.removeChild(c[n])}else{var g=document.createElement("img"),o=document.createElement("canvas"),m=o.getContext("2d");o.width=c[n].getAttribute("width");o.height=c[n].getAttribute("height");g.src=c[n].getAttribute("xlink:href");g.width=c[n].getAttribute("width");g.height=c[n].getAttribute("height");try{m.drawImage(g,0,0,g.width,g.height),datastring=o.toDataURL()}catch(p){throw datastring=g.src,f.log("Tainted canvas, reached browser CORS security; origin from imagery must be equal to the server!"),Error(p)}c[n].setAttribute("xlink:href",datastring)}10==f.DEBUG&&f.log("POLIFIED",c[n])}}var f=this;0==AmCharts.IEversion&&(d.setAttribute("xmlns","http://www.w3.org/2000/svg"),f.cfg.removeImagery||d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"));10==f.DEBUG&&f.log("POLIFIED",d);a(d,"pattern");a(d,"image");f.svgs.push(d);return d},generateSVG:function(){var g=document.createElement("svg");g.setAttribute("xmlns","http://www.w3.org/2000/svg");g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");for(var d=0;d<this.processing.buffer.length;d++){var h=document.createElement("g"),f=this.processing.buffer[d];f[0].setAttribute("xmlns","http://www.w3.org/2000/svg");f[0].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");h.setAttribute("transform","translate("+f[1].x+","+f[1].y+")");h.appendChild(f[0]);g.appendChild(h)}return(new XMLSerializer).serializeToString(g)},generateOutput:function(y,B){function A(){var c,a,b;if(C.processing.buffer.length==C.processing.drawn||"svg"==y.format){return 10==C.DEBUG&&C.log("END DRAWING"),B()}10==C.DEBUG&&C.log("DRAW",C.processing.drawn+1,"OF",C.processing.buffer.length);a=C.processing.buffer[C.processing.drawn];b=(new XMLSerializer).serializeToString(a[0]);c=a[1];10==C.DEBUG&&C.log("SOURCE",b);if("browser"==y.render){if(c=new Image,c.id=AmCharts.getUniqueId(),b="data:image/svg+xml;base64,"+btoa(b),c.onload=function(){t.drawImage(this,a[1].x,a[1].y);C.processing.drawn++;10==C.DEBUG&&C.log("ONLOAD",this);A()},c.onerror=function(){10==C.DEBUG&&C.log("ONERROR",this);t.drawImage(this,a[1].x,a[1].y);C.processing.drawn++;A()},c.src=b,10==C.DEBUG&&C.log("ADD",c),c.complete||"undefined"==typeof c.complete||void 0===c.complete){10==C.DEBUG&&C.log("FORCE ONLOAD",c),c.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",c.src=b}}else{"canvg"==y.render&&canvg(v,b,{offsetX:c.x,offsetY:c.y,ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,renderCallback:function(){C.processing.drawn++;A()}})}}for(var C=this,z=[],w=[],v=document.createElement("canvas"),t=v.getContext("2d"),x={y:0,x:0},z=C.chart.div.getElementsByTagName("svg"),u=0;u<z.length;u++){w.push(z[u])}C.chart.legend&&"outside"==C.chart.legend.position&&(C.chart.legend.container.container.externalLegend=!0,w.push(C.chart.legend.container.container),"left"==C.cfg.legendPosition?x.x=C.chart.legend.div.offsetWidth:"top"==C.cfg.legendPosition?x.y=C.chart.legend.div.offsetHeight:"object"==typeof C.cfg.legendPosition&&(x.y=C.cfg.legendPosition.chartTop,x.x=C.cfg.legendPosition.chartLeft));C.processing.buffer=[];C.processing.drawn=0;C.canvas=v;C.svgs=[];10==C.DEBUG&&C.log("START EXPORT");10==C.DEBUG&&C.log("START BUFFERING");for(u=0;u<w.length;u++){var z=w[u].parentNode,o=Number(z.style.left.slice(0,-2)),r=Number(z.style.top.slice(0,-2)),s=C.polifySVG(w[u].cloneNode(!0)),j=AmCharts.extend({},x);w[u].externalLegend?"right"==C.cfg.legendPosition?(x.y=0,x.x=C.chart.divRealWidth):"bottom"==C.cfg.legendPosition?x.y=r?r:x.y:"object"==typeof C.cfg.legendPosition?(x.x=C.cfg.legendPosition.left,x.y=C.cfg.legendPosition.top):(x.x=0,x.y=0):"relative"==z.style.position?(x.x=o?o:x.x,x.y=r?r:x.y):(x.x=o,x.y=r);C.processing.buffer.push([s,AmCharts.extend({},x)]);r&&o?x=j:x.y+=r?0:z.offsetHeight;10==C.DEBUG&&C.log("BUFFERED",w[u],x)}10==C.DEBUG&&C.log("END BUFFERING");10==C.DEBUG&&C.log("START DRAWING",y.render);10==C.DEBUG&&C.log("FILL BACKGROUND");v.id=AmCharts.getUniqueId();v.width=C.chart.divRealWidth;v.height=C.chart.divRealHeight;C.chart.legend&&"outside"==C.chart.legend.position&&(-1!=["left","right"].indexOf(C.cfg.legendPosition)?v.width+=C.chart.legend.div.offsetWidth:"object"==typeof C.cfg.legendPosition?(v.width+=C.cfg.legendPosition.width,v.height+=C.cfg.legendPosition.height):v.height+=C.chart.legend.div.offsetHeight);w=!1;C.chart.periodSelector&&(-1!=["left","right"].indexOf(C.chart.periodSelector.position)?(v.width-=C.chart.periodSelector.div.offsetWidth+16,w=!0):v.height-=C.chart.periodSelector.div.offsetHeight);C.chart.dataSetSelector&&(-1!=["left","right"].indexOf(C.chart.dataSetSelector.position)?w||(v.width-=C.chart.dataSetSelector.div.offsetWidth+16):v.height-=C.chart.dataSetSelector.div.offsetHeight);if(y.backgroundColor||"image/jpeg"==y.format){t.fillStyle=y.backgroundColor||"#FFFFFF",t.fillRect(0,0,v.width,v.height)}return A()},generateButtons:function(){function d(s){var r=document.createElement("ul");r.setAttribute("style","list-style: none; margin: 0; padding: 0;");for(var o=0;o<s.length;o++){var m=document.createElement("li"),e=document.createElement("img"),q=document.createElement("a"),j=s[o],b=null,c=AmCharts.extend(AmCharts.extend({},a.cfg.menuItemStyle),s[o]),j=AmCharts.extend(AmCharts.extend({},a.cfg.menuItemOutput),j);j.icon&&(e.alt="",e.src=j.icon,e.setAttribute("style","margin: 0 auto;border: none;outline: none"),j.iconTitle&&(e.title=j.iconTitle),q.appendChild(e));q.href="#";j.title&&(e.setAttribute("style","margin: 0px 5px;"),q.innerHTML+=j.title);q.setAttribute("style","display: block;");AmCharts.extend(q.style,c);q.onclick=j.onclick.bind(q,a,j);m.appendChild(q);j.items&&(b=d(j.items),m.appendChild(b),m.onmouseover=function(){b.style.display="block"},m.onmouseout=function(){b.style.display="none"},b.style.display="none");r.appendChild(m);q.onmouseover=function(){this.style.backgroundColor=c.rollOverBackgroundColor;this.style.color=c.rollOverColor;this.style.borderColor=c.rollOverBorderColor};q.onmouseout=function(){this.style.backgroundColor=c.backgroundColor;this.style.color=c.color;this.style.borderColor=c.borderColor}}f++;10==a.DEBUG&&a.log("MENU",r);return r}var a=this,f=0;a.div?(div=a.div,div.innerHTML=""):(div=document.createElement("div"),a.div=div);div.setAttribute("style","position: absolute;top:"+a.cfg.menuTop+";right:"+a.cfg.menuRight+";bottom:"+a.cfg.menuBottom+";left:"+a.cfg.menuLeft+";");div.setAttribute("class","amExportButton");div.appendChild(d(a.cfg.menuItems));a.chart.containerDiv.appendChild(div)}});(function(){function a(){var c={FRAMERATE:30,MAX_VIRTUAL_PIXELS:30000,init:function(d){var b=0;c.UniqueId=function(){b++;return"canvg"+b};c.Definitions={};c.Styles={};c.Animations=[];c.Images=[];c.ctx=d;c.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(f,e){this.viewPorts.push({width:f,height:e})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(e){return null!=e&&"number"==typeof e?e:"x"==e?this.width():"y"==e?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}}};c.init();c.ImagesLoaded=function(){for(var b=0;b<c.Images.length;b++){if(!c.Images[b].loaded){return !1}}return !0};c.trim=function(d){return d.replace(/^\s+|\s+$/g,"")};c.compressSpaces=function(d){return d.replace(/[\s\r\t\n]+/gm," ")};c.ajax=function(d){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",d,!1),e.send(null),e.responseText):null};c.parseXml=function(d){if(window.DOMParser){return(new DOMParser).parseFromString(d,"text/xml")}d=d.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(d);return e};c.Property=function(d,e){this.name=d;this.value=e};c.Property.prototype.getValue=function(){return this.value};c.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value};c.Property.prototype.numValue=function(){if(!this.hasValue()){return 0}var d=parseFloat(this.value);(this.value+"").match(/%$/)&&(d/=100);return d};c.Property.prototype.valueOrDefault=function(d){return this.hasValue()?this.value:d};c.Property.prototype.numValueOrDefault=function(d){return this.hasValue()?this.numValue():d};c.Property.prototype.addOpacity=function(f){var b=this.value;if(null!=f&&""!=f&&"string"==typeof this.value){var e=new RGBColor(this.value);e.ok&&(b="rgba("+e.r+", "+e.g+", "+e.b+", "+f+")")}return new c.Property(this.name,b)};c.Property.prototype.getDefinition=function(){var b=this.value.match(/#([^\)'"]+)/);b&&(b=b[1]);b||(b=this.value);return c.Definitions[b]};c.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")};c.Property.prototype.getFillStyleDefinition=function(h,b){var f=this.getDefinition();if(null!=f&&f.createGradient){return f.createGradient(c.ctx,h,b)}if(null!=f&&f.createPattern){if(f.getHrefAttribute().hasValue()){var e=f.attribute("patternTransform"),f=f.getHrefAttribute().getDefinition();e.hasValue()&&(f.attribute("patternTransform",!0).value=e.value)}return f.createPattern(c.ctx,h)}return null};c.Property.prototype.getDPI=function(d){return 96};c.Property.prototype.getEM=function(f){var b=12,e=new c.Property("fontSize",c.Font.Parse(c.ctx.font).fontSize);e.hasValue()&&(b=e.toPixels(f));return b};c.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")};c.Property.prototype.toPixels=function(f,b){if(!this.hasValue()){return 0}var e=this.value+"";if(e.match(/em$/)){return this.numValue()*this.getEM(f)}if(e.match(/ex$/)){return this.numValue()*this.getEM(f)/2}if(e.match(/px$/)){return this.numValue()}if(e.match(/pt$/)){return this.numValue()*this.getDPI(f)*(1/72)}if(e.match(/pc$/)){return 15*this.numValue()}if(e.match(/cm$/)){return this.numValue()*this.getDPI(f)/2.54}if(e.match(/mm$/)){return this.numValue()*this.getDPI(f)/25.4}if(e.match(/in$/)){return this.numValue()*this.getDPI(f)}if(e.match(/%$/)){return this.numValue()*c.ViewPort.ComputeSize(f)}e=this.numValue();return b&&1>e?e*c.ViewPort.ComputeSize(f):e};c.Property.prototype.toMilliseconds=function(){if(!this.hasValue()){return 0}var d=this.value+"";if(d.match(/s$/)){return 1000*this.numValue()}d.match(/ms$/);return this.numValue()};c.Property.prototype.toRadians=function(){if(!this.hasValue()){return 0}var d=this.value+"";return d.match(/deg$/)?this.numValue()*(Math.PI/180):d.match(/grad$/)?this.numValue()*(Math.PI/200):d.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};c.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(e,m,k,j,n,l){l=null!=l?this.Parse(l):this.CreateFont("","","","","",c.ctx.font);return{fontFamily:n||l.fontFamily,fontSize:j||l.fontSize,fontStyle:e||l.fontStyle,fontWeight:k||l.fontWeight,fontVariant:m||l.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var b=this;this.Parse=function(m){var s={};m=c.trim(c.compressSpaces(m||"")).split(" ");for(var p=!1,o=!1,j=!1,q=!1,n="",r=0;r<m.length;r++){o||-1==b.Styles.indexOf(m[r])?q||-1==b.Variants.indexOf(m[r])?j||-1==b.Weights.indexOf(m[r])?p?"inherit"!=m[r]&&(n+=m[r]):("inherit"!=m[r]&&(s.fontSize=m[r].split("/")[0]),o=q=j=p=!0):("inherit"!=m[r]&&(s.fontWeight=m[r]),o=q=j=!0):("inherit"!=m[r]&&(s.fontVariant=m[r]),o=q=!0):("inherit"!=m[r]&&(s.fontStyle=m[r]),o=!0)}""!=n&&(s.fontFamily=n);return s}};c.ToNumberArray=function(d){d=c.trim(c.compressSpaces((d||"").replace(/,/g," "))).split(" ");for(var b=0;b<d.length;b++){d[b]=parseFloat(d[b])}return d};c.Point=function(d,e){this.x=d;this.y=e};c.Point.prototype.angleTo=function(d){return Math.atan2(d.y-this.y,d.x-this.x)};c.Point.prototype.applyTransform=function(d){var e=this.x*d[1]+this.y*d[3]+d[5];this.x=this.x*d[0]+this.y*d[2]+d[4];this.y=e};c.CreatePoint=function(b){b=c.ToNumberArray(b);return new c.Point(b[0],b[1])};c.CreatePath=function(f){f=c.ToNumberArray(f);for(var b=[],e=0;e<f.length;e+=2){b.push(new c.Point(f[e],f[e+1]))}return b};c.BoundingBox=function(e,f,j,h){this.y2=this.x2=this.y1=this.x1=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(b,g){if(null!=b){if(isNaN(this.x1)||isNaN(this.x2)){this.x2=this.x1=b}b<this.x1&&(this.x1=b);b>this.x2&&(this.x2=b)}if(null!=g){if(isNaN(this.y1)||isNaN(this.y2)){this.y2=this.y1=g}g<this.y1&&(this.y1=g);g>this.y2&&(this.y2=g)}};this.addX=function(b){this.addPoint(b,null)};this.addY=function(b){this.addPoint(null,b)};this.addBoundingBox=function(b){this.addPoint(b.x1,b.y1);this.addPoint(b.x2,b.y2)};this.addQuadraticCurve=function(l,o,k,m,p,n){k=l+2/3*(k-l);m=o+2/3*(m-o);this.addBezierCurve(l,o,k,k+1/3*(p-l),m,m+1/3*(n-o),p,n)};this.addBezierCurve=function(y,r,t,o,s,p,n,k){var B=[y,r],z=[t,o],l=[s,p],w=[n,k];this.addPoint(B[0],B[1]);this.addPoint(w[0],w[1]);for(i=0;1>=i;i++){y=function(b){return Math.pow(1-b,3)*B[i]+3*Math.pow(1-b,2)*b*z[i]+3*(1-b)*Math.pow(b,2)*l[i]+Math.pow(b,3)*w[i]},r=6*B[i]-12*z[i]+6*l[i],t=-3*B[i]+9*z[i]-9*l[i]+3*w[i],o=3*z[i]-3*B[i],0==t?0!=r&&(r=-o/r,0<r&&1>r&&(0==i&&this.addX(y(r)),1==i&&this.addY(y(r)))):(o=Math.pow(r,2)-4*o*t,0>o||(s=(-r+Math.sqrt(o))/(2*t),0<s&&1>s&&(0==i&&this.addX(y(s)),1==i&&this.addY(y(s))),r=(-r-Math.sqrt(o))/(2*t),0<r&&1>r&&(0==i&&this.addX(y(r)),1==i&&this.addY(y(r)))))}};this.isPointInBox=function(b,g){return this.x1<=b&&b<=this.x2&&this.y1<=g&&g<=this.y2};this.addPoint(e,f);this.addPoint(j,h)};c.Transform=function(k){var b=this;this.Type={};this.Type.translate=function(d){this.p=c.CreatePoint(d);this.apply=function(g){g.translate(this.p.x||0,this.p.y||0)};this.unapply=function(g){g.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(g){g.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(d){d=c.ToNumberArray(d);this.angle=new c.Property("angle",d[0]);this.cx=d[1]||0;this.cy=d[2]||0;this.apply=function(g){g.translate(this.cx,this.cy);g.rotate(this.angle.toRadians());g.translate(-this.cx,-this.cy)};this.unapply=function(g){g.translate(this.cx,this.cy);g.rotate(-1*this.angle.toRadians());g.translate(-this.cx,-this.cy)};this.applyToPoint=function(g){var h=this.angle.toRadians();g.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);g.applyTransform([Math.cos(h),Math.sin(h),-Math.sin(h),Math.cos(h),0,0]);g.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(d){this.p=c.CreatePoint(d);this.apply=function(g){g.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(g){g.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(g){g.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(d){this.m=c.ToNumberArray(d);this.apply=function(g){g.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(g){g.applyTransform(this.m)}};this.Type.SkewBase=function(g){this.base=b.Type.matrix;this.base(g);this.angle=new c.Property("angle",g)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(g){this.base=b.Type.SkewBase;this.base(g);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(g){this.base=b.Type.SkewBase;this.base(g);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(g){for(var h=0;h<this.transforms.length;h++){this.transforms[h].apply(g)}};this.unapply=function(g){for(var h=this.transforms.length-1;0<=h;h--){this.transforms[h].unapply(g)}};this.applyToPoint=function(g){for(var h=0;h<this.transforms.length;h++){this.transforms[h].applyToPoint(g)}};k=c.trim(c.compressSpaces(k)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var j=0;j<k.length;j++){var f=c.trim(k[j].split("(")[0]),e=k[j].split("(")[1].replace(")",""),e=new this.Type[f](e);e.type=f;this.transforms.push(e)}};c.AspectRatio=function(B,C,z,w,t,r,x,s,y,o){C=c.compressSpaces(C);C=C.replace(/^defer\s/,"");var p=C.split(" ")[0]||"xMidYMid";C=C.split(" ")[1]||"meet";var b=z/w,E=t/r,D=Math.min(b,E),j=Math.max(b,E);"meet"==C&&(w*=D,r*=D);"slice"==C&&(w*=j,r*=j);y=new c.Property("refX",y);o=new c.Property("refY",o);y.hasValue()&&o.hasValue()?B.translate(-D*y.toPixels("x"),-D*o.toPixels("y")):(p.match(/^xMid/)&&("meet"==C&&D==E||"slice"==C&&j==E)&&B.translate(z/2-w/2,0),p.match(/YMid$/)&&("meet"==C&&D==b||"slice"==C&&j==b)&&B.translate(0,t/2-r/2),p.match(/^xMax/)&&("meet"==C&&D==E||"slice"==C&&j==E)&&B.translate(z-w,0),p.match(/YMax$/)&&("meet"==C&&D==b||"slice"==C&&j==b)&&B.translate(0,t-r));"none"==p?B.scale(b,E):"meet"==C?B.scale(D,D):"slice"==C&&B.scale(j,j);B.translate(null==x?0:-x,null==s?0:-s)};c.Element={};c.EmptyProperty=new c.Property("EMPTY","");c.Element.ElementBase=function(k){this.attributes={};this.styles={};this.children=[];this.attribute=function(h,m){var l=this.attributes[h];if(null!=l){return l}!0==m&&(l=new c.Property(h,""),this.attributes[h]=l);return l||c.EmptyProperty};this.getHrefAttribute=function(){for(var d in this.attributes){if(d.match(/:href$/)){return this.attributes[d]}}return c.EmptyProperty};this.style=function(l,o){var n=this.styles[l];if(null!=n){return n}var m=this.attribute(l);if(null!=m&&m.hasValue()){return this.styles[l]=m}m=this.parent;if(null!=m&&(m=m.style(l),null!=m&&m.hasValue())){return m}!0==o&&(n=new c.Property(l,""),this.styles[l]=n);return n||c.EmptyProperty};this.render=function(g){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){g.save();if(this.attribute("mask").hasValue()){var h=this.attribute("mask").getDefinition();null!=h&&h.apply(g,this)}else{this.style("filter").hasValue()?(h=this.style("filter").getDefinition(),null!=h&&h.apply(g,this)):(this.setContext(g),this.renderChildren(g),this.clearContext(g))}g.restore()}};this.setContext=function(d){};this.clearContext=function(d){};this.renderChildren=function(g){for(var h=0;h<this.children.length;h++){this.children[h].render(g)}};this.addChild=function(h,m){var l=h;m&&(l=c.CreateElement(h));l.parent=this;this.children.push(l)};if(null!=k&&1==k.nodeType){for(var b=0;b<k.childNodes.length;b++){var j=k.childNodes[b];1==j.nodeType&&this.addChild(j,!0);this.captureTextNodes&&3==j.nodeType&&""!=c.trim(c.compressSpaces(j.nodeValue||j.text||""))&&this.addChild(new c.Element.tspan(j),!1)}for(b=0;b<k.attributes.length;b++){j=k.attributes[b],this.attributes[j.nodeName]=new c.Property(j.nodeName,j.nodeValue)}j=c.Styles[k.nodeName];if(null!=j){for(var f in j){this.styles[f]=j[f]}}if(this.attribute("class").hasValue()){for(var b=c.compressSpaces(this.attribute("class").value).split(" "),e=0;e<b.length;e++){j=c.Styles["."+b[e]];if(null!=j){for(f in j){this.styles[f]=j[f]}}j=c.Styles[k.nodeName+"."+b[e]];if(null!=j){for(f in j){this.styles[f]=j[f]}}}}if(this.attribute("id").hasValue()&&(j=c.Styles["#"+this.attribute("id").value],null!=j)){for(f in j){this.styles[f]=j[f]}}if(this.attribute("style").hasValue()){for(j=this.attribute("style").value.split(";"),b=0;b<j.length;b++){""!=c.trim(j[b])&&(k=j[b].split(":"),f=c.trim(k[0]),k=c.trim(k[1]),this.styles[f]=new c.Property(f,k))}}this.attribute("id").hasValue()&&null==c.Definitions[this.attribute("id").value]&&(c.Definitions[this.attribute("id").value]=this)}};c.Element.RenderedElementBase=function(b){this.base=c.Element.ElementBase;this.base(b);this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var f=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=f&&(e.fillStyle=f)}else{this.style("fill").hasValue()&&(f=this.style("fill"),"currentColor"==f.value&&(f.value=this.style("color").value),e.fillStyle="none"==f.value?"rgba(0,0,0,0)":f.value)}this.style("fill-opacity").hasValue()&&(f=new c.Property("fill",e.fillStyle),f=f.addOpacity(this.style("fill-opacity").value),e.fillStyle=f.value);this.style("stroke").isUrlDefinition()?(f=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),null!=f&&(e.strokeStyle=f)):this.style("stroke").hasValue()&&(f=this.style("stroke"),"currentColor"==f.value&&(f.value=this.style("color").value),e.strokeStyle="none"==f.value?"rgba(0,0,0,0)":f.value);this.style("stroke-opacity").hasValue()&&(f=new c.Property("stroke",e.strokeStyle),f=f.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=f.value);this.style("stroke-width").hasValue()&&(f=this.style("stroke-width").toPixels(),e.lineWidth=0==f?0.001:f);this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value);this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value);this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value);this.style("stroke-dasharray").hasValue()&&(f=c.ToNumberArray(this.style("stroke-dasharray").value),"undefined"!=typeof e.setLineDash?e.setLineDash(f):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=f:"undefined"!=typeof e.mozDash&&(e.mozDash=f),f=this.style("stroke-dashoffset").numValueOrDefault(1),"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=f:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=f:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=f));"undefined"!=typeof e.font&&(e.font=c.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString());this.attribute("transform").hasValue()&&(new c.Transform(this.attribute("transform").value)).apply(e);this.style("clip-path").hasValue()&&(f=this.style("clip-path").getDefinition(),null!=f&&f.apply(e));this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}};c.Element.RenderedElementBase.prototype=new c.Element.ElementBase;c.Element.PathElementBase=function(b){this.base=c.Element.RenderedElementBase;this.base(b);this.path=function(d){null!=d&&d.beginPath();return new c.BoundingBox};this.renderChildren=function(e){this.path(e);c.Mouse.checkPath(this,e);""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill());""!=e.strokeStyle&&e.stroke();var k=this.getMarkers();if(null!=k){if(this.style("marker-start").isUrlDefinition()){var j=this.style("marker-start").getDefinition();j.render(e,k[0][0],k[0][1])}if(this.style("marker-mid").isUrlDefinition()){for(var j=this.style("marker-mid").getDefinition(),f=1;f<k.length-1;f++){j.render(e,k[f][0],k[f][1])}}this.style("marker-end").isUrlDefinition()&&(j=this.style("marker-end").getDefinition(),j.render(e,k[k.length-1][0],k[k.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};c.Element.PathElementBase.prototype=new c.Element.RenderedElementBase;c.Element.svg=function(b){this.base=c.Element.RenderedElementBase;this.base(b);this.baseClearContext=this.clearContext;this.clearContext=function(d){this.baseClearContext(d);c.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)";e.lineCap="butt";e.lineJoin="miter";e.miterLimit=4;this.baseSetContext(e);this.attribute("x").hasValue()||(this.attribute("x",!0).value=0);this.attribute("y").hasValue()||(this.attribute("y",!0).value=0);e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var m=c.ViewPort.width(),k=c.ViewPort.height();this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%");this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%");if("undefined"==typeof this.root){var m=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y"),j=0,n=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(j=-this.attribute("refX").toPixels("x"),n=-this.attribute("refY").toPixels("y"));e.beginPath();e.moveTo(j,n);e.lineTo(m,n);e.lineTo(m,k);e.lineTo(j,k);e.closePath();e.clip()}c.ViewPort.SetCurrent(m,k);if(this.attribute("viewBox").hasValue()){var j=c.ToNumberArray(this.attribute("viewBox").value),n=j[0],l=j[1],m=j[2],k=j[3];c.AspectRatio(e,this.attribute("preserveAspectRatio").value,c.ViewPort.width(),m,c.ViewPort.height(),k,n,l,this.attribute("refX").value,this.attribute("refY").value);c.ViewPort.RemoveCurrent();c.ViewPort.SetCurrent(j[2],j[3])}}};c.Element.svg.prototype=new c.Element.RenderedElementBase;c.Element.rect=function(b){this.base=c.Element.PathElementBase;this.base(b);this.path=function(e){var o=this.attribute("x").toPixels("x"),m=this.attribute("y").toPixels("y"),l=this.attribute("width").toPixels("x"),p=this.attribute("height").toPixels("y"),n=this.attribute("rx").toPixels("x"),j=this.attribute("ry").toPixels("y");this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(j=n);this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(n=j);n=Math.min(n,l/2);j=Math.min(j,p/2);null!=e&&(e.beginPath(),e.moveTo(o+n,m),e.lineTo(o+l-n,m),e.quadraticCurveTo(o+l,m,o+l,m+j),e.lineTo(o+l,m+p-j),e.quadraticCurveTo(o+l,m+p,o+l-n,m+p),e.lineTo(o+n,m+p),e.quadraticCurveTo(o,m+p,o,m+p-j),e.lineTo(o,m+j),e.quadraticCurveTo(o,m,o+n,m),e.closePath());return new c.BoundingBox(o,m,o+l,m+p)}};c.Element.rect.prototype=new c.Element.PathElementBase;c.Element.circle=function(b){this.base=c.Element.PathElementBase;this.base(b);this.path=function(e){var k=this.attribute("cx").toPixels("x"),j=this.attribute("cy").toPixels("y"),f=this.attribute("r").toPixels();null!=e&&(e.beginPath(),e.arc(k,j,f,0,2*Math.PI,!0),e.closePath());return new c.BoundingBox(k-f,j-f,k+f,j+f)}};c.Element.circle.prototype=new c.Element.PathElementBase;c.Element.ellipse=function(b){this.base=c.Element.PathElementBase;this.base(b);this.path=function(e){var m=4*((Math.sqrt(2)-1)/3),k=this.attribute("rx").toPixels("x"),j=this.attribute("ry").toPixels("y"),n=this.attribute("cx").toPixels("x"),l=this.attribute("cy").toPixels("y");null!=e&&(e.beginPath(),e.moveTo(n,l-j),e.bezierCurveTo(n+m*k,l-j,n+k,l-m*j,n+k,l),e.bezierCurveTo(n+k,l+m*j,n+m*k,l+j,n,l+j),e.bezierCurveTo(n-m*k,l+j,n-k,l+m*j,n-k,l),e.bezierCurveTo(n-k,l-m*j,n-m*k,l-j,n,l-j),e.closePath());return new c.BoundingBox(n-k,l-j,n+k,l+j)}};c.Element.ellipse.prototype=new c.Element.PathElementBase;c.Element.line=function(b){this.base=c.Element.PathElementBase;this.base(b);this.getPoints=function(){return[new c.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new c.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(e){var f=this.getPoints();null!=e&&(e.beginPath(),e.moveTo(f[0].x,f[0].y),e.lineTo(f[1].x,f[1].y));return new c.BoundingBox(f[0].x,f[0].y,f[1].x,f[1].y)};this.getMarkers=function(){var e=this.getPoints(),f=e[0].angleTo(e[1]);return[[e[0],f],[e[1],f]]}};c.Element.line.prototype=new c.Element.PathElementBase;c.Element.polyline=function(b){this.base=c.Element.PathElementBase;this.base(b);this.points=c.CreatePath(this.attribute("points").value);this.path=function(e){var h=new c.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var f=1;f<this.points.length;f++){h.addPoint(this.points[f].x,this.points[f].y),null!=e&&e.lineTo(this.points[f].x,this.points[f].y)}return h};this.getMarkers=function(){for(var e=[],f=0;f<this.points.length-1;f++){e.push([this.points[f],this.points[f].angleTo(this.points[f+1])])}e.push([this.points[this.points.length-1],e[e.length-1][1]]);return e}};c.Element.polyline.prototype=new c.Element.PathElementBase;c.Element.polygon=function(b){this.base=c.Element.polyline;this.base(b);this.basePath=this.path;this.path=function(e){var f=this.basePath(e);null!=e&&(e.lineTo(this.points[0].x,this.points[0].y),e.closePath());return f}};c.Element.polygon.prototype=new c.Element.polyline;c.Element.path=function(b){this.base=c.Element.PathElementBase;this.base(b);b=this.attribute("d").value;b=b.replace(/,/gm," ");b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");b=b.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");b=b.replace(/([0-9])([+\-])/gm,"$1 $2");b=b.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");b=b.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");b=c.compressSpaces(b);b=c.trim(b);this.PathParser=new function(d){this.tokens=d.split(" ");this.reset=function(){this.i=-1;this.previousCommand=this.command="";this.start=new c.Point(0,0);this.control=new c.Point(0,0);this.current=new c.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return !0}return !1};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var e=new c.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)};this.getAsControlPoint=function(){var e=this.getPoint();return this.control=e};this.getAsCurrentPoint=function(){var e=this.getPoint();return this.current=e};this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new c.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(e){this.isRelativeCommand()&&(e.x+=this.current.x,e.y+=this.current.y);return e};this.addMarker=function(f,e,g){null!=g&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(g));this.addMarkerAngle(f,null==e?null:e.angleTo(f))};this.addMarkerAngle=function(f,e){this.points.push(f);this.angles.push(e)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var f=0;f<this.angles.length;f++){if(null==this.angles[f]){for(var e=f+1;e<this.angles.length;e++){if(null!=this.angles[e]){this.angles[f]=this.angles[e];break}}}}return this.angles}}(b);this.path=function(F){var B=this.PathParser;B.reset();var t=new c.BoundingBox;for(null!=F&&F.beginPath();!B.isEnd();){switch(B.nextCommand(),B.command){case"M":case"m":var D=B.getAsCurrentPoint();B.addMarker(D);t.addPoint(D.x,D.y);null!=F&&F.moveTo(D.x,D.y);for(B.start=B.current;!B.isCommandOrEnd();){D=B.getAsCurrentPoint(),B.addMarker(D,B.start),t.addPoint(D.x,D.y),null!=F&&F.lineTo(D.x,D.y)}break;case"L":case"l":for(;!B.isCommandOrEnd();){var r=B.current,D=B.getAsCurrentPoint();B.addMarker(D,r);t.addPoint(D.x,D.y);null!=F&&F.lineTo(D.x,D.y)}break;case"H":case"h":for(;!B.isCommandOrEnd();){D=new c.Point((B.isRelativeCommand()?B.current.x:0)+B.getScalar(),B.current.y),B.addMarker(D,B.current),B.current=D,t.addPoint(B.current.x,B.current.y),null!=F&&F.lineTo(B.current.x,B.current.y)}break;case"V":case"v":for(;!B.isCommandOrEnd();){D=new c.Point(B.current.x,(B.isRelativeCommand()?B.current.y:0)+B.getScalar()),B.addMarker(D,B.current),B.current=D,t.addPoint(B.current.x,B.current.y),null!=F&&F.lineTo(B.current.x,B.current.y)}break;case"C":case"c":for(;!B.isCommandOrEnd();){var w=B.current,r=B.getPoint(),s=B.getAsControlPoint(),D=B.getAsCurrentPoint();B.addMarker(D,s,r);t.addBezierCurve(w.x,w.y,r.x,r.y,s.x,s.y,D.x,D.y);null!=F&&F.bezierCurveTo(r.x,r.y,s.x,s.y,D.x,D.y)}break;case"S":case"s":for(;!B.isCommandOrEnd();){w=B.current,r=B.getReflectedControlPoint(),s=B.getAsControlPoint(),D=B.getAsCurrentPoint(),B.addMarker(D,s,r),t.addBezierCurve(w.x,w.y,r.x,r.y,s.x,s.y,D.x,D.y),null!=F&&F.bezierCurveTo(r.x,r.y,s.x,s.y,D.x,D.y)}break;case"Q":case"q":for(;!B.isCommandOrEnd();){w=B.current,s=B.getAsControlPoint(),D=B.getAsCurrentPoint(),B.addMarker(D,s,s),t.addQuadraticCurve(w.x,w.y,s.x,s.y,D.x,D.y),null!=F&&F.quadraticCurveTo(s.x,s.y,D.x,D.y)}break;case"T":case"t":for(;!B.isCommandOrEnd();){w=B.current,s=B.getReflectedControlPoint(),B.control=s,D=B.getAsCurrentPoint(),B.addMarker(D,s,s),t.addQuadraticCurve(w.x,w.y,s.x,s.y,D.x,D.y),null!=F&&F.quadraticCurveTo(s.x,s.y,D.x,D.y)}break;case"A":case"a":for(;!B.isCommandOrEnd();){var w=B.current,y=B.getScalar(),o=B.getScalar(),r=B.getScalar()*(Math.PI/180),p=B.getScalar(),s=B.getScalar(),D=B.getAsCurrentPoint(),h=new c.Point(Math.cos(r)*(w.x-D.x)/2+Math.sin(r)*(w.y-D.y)/2,-Math.sin(r)*(w.x-D.x)/2+Math.cos(r)*(w.y-D.y)/2),H=Math.pow(h.x,2)/Math.pow(y,2)+Math.pow(h.y,2)/Math.pow(o,2);1<H&&(y*=Math.sqrt(H),o*=Math.sqrt(H));p=(p==s?-1:1)*Math.sqrt((Math.pow(y,2)*Math.pow(o,2)-Math.pow(y,2)*Math.pow(h.y,2)-Math.pow(o,2)*Math.pow(h.x,2))/(Math.pow(y,2)*Math.pow(h.y,2)+Math.pow(o,2)*Math.pow(h.x,2)));isNaN(p)&&(p=0);var G=new c.Point(p*y*h.y/o,p*-o*h.x/y),w=new c.Point((w.x+D.x)/2+Math.cos(r)*G.x-Math.sin(r)*G.y,(w.y+D.y)/2+Math.sin(r)*G.x+Math.cos(r)*G.y),j=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2))},E=function(e,f){return(e[0]*f[0]+e[1]*f[1])/(j(e)*j(f))},C=function(e,f){return(e[0]*f[1]<e[1]*f[0]?-1:1)*Math.acos(E(e,f))},p=C([1,0],[(h.x-G.x)/y,(h.y-G.y)/o]),H=[(h.x-G.x)/y,(h.y-G.y)/o],G=[(-h.x-G.x)/y,(-h.y-G.y)/o],h=C(H,G);-1>=E(H,G)&&(h=Math.PI);1<=E(H,G)&&(h=0);H=1-s?1:-1;G=p+h/2*H;C=new c.Point(w.x+y*Math.cos(G),w.y+o*Math.sin(G));B.addMarkerAngle(C,G-H*Math.PI/2);B.addMarkerAngle(D,G-H*Math.PI);t.addPoint(D.x,D.y);null!=F&&(E=y>o?y:o,D=y>o?1:y/o,y=y>o?o/y:1,F.translate(w.x,w.y),F.rotate(r),F.scale(D,y),F.arc(0,0,E,p,p+h,1-s),F.scale(1/D,1/y),F.rotate(-r),F.translate(-w.x,-w.y))}break;case"Z":case"z":null!=F&&F.closePath(),B.current=B.start}}return t};this.getMarkers=function(){for(var f=this.PathParser.getMarkerPoints(),g=this.PathParser.getMarkerAngles(),e=[],h=0;h<f.length;h++){e.push([f[h],g[h]])}return e}};c.Element.path.prototype=new c.Element.PathElementBase;c.Element.pattern=function(b){this.base=c.Element.ElementBase;this.base(b);this.createPattern=function(g,o){var p=this.attribute("width").toPixels("x",!0),l=this.attribute("height").toPixels("y",!0),n=new c.Element.svg;n.attributes.viewBox=new c.Property("viewBox",this.attribute("viewBox").value);n.attributes.width=new c.Property("width",p+"px");n.attributes.height=new c.Property("height",l+"px");n.attributes.transform=new c.Property("transform",this.attribute("patternTransform").value);n.children=this.children;var m=document.createElement("canvas");m.width=p;m.height=l;p=m.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&p.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(l=-1;1>=l;l++){for(var j=-1;1>=j;j++){p.save(),p.translate(l*m.width,j*m.height),n.render(p),p.restore()}}return g.createPattern(m,"repeat")}};c.Element.pattern.prototype=new c.Element.ElementBase;c.Element.marker=function(b){this.base=c.Element.ElementBase;this.base(b);this.baseRender=this.render;this.render=function(e,g,j){e.translate(g.x,g.y);"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(j);"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth);e.save();var f=new c.Element.svg;f.attributes.viewBox=new c.Property("viewBox",this.attribute("viewBox").value);f.attributes.refX=new c.Property("refX",this.attribute("refX").value);f.attributes.refY=new c.Property("refY",this.attribute("refY").value);f.attributes.width=new c.Property("width",this.attribute("markerWidth").value);f.attributes.height=new c.Property("height",this.attribute("markerHeight").value);f.attributes.fill=new c.Property("fill",this.attribute("fill").valueOrDefault("black"));f.attributes.stroke=new c.Property("stroke",this.attribute("stroke").valueOrDefault("none"));f.children=this.children;f.render(e);e.restore();"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth);"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-j);e.translate(-g.x,-g.y)}};c.Element.marker.prototype=new c.Element.ElementBase;c.Element.defs=function(b){this.base=c.Element.ElementBase;this.base(b);this.render=function(d){}};c.Element.defs.prototype=new c.Element.ElementBase;c.Element.GradientBase=function(d){this.base=c.Element.ElementBase;this.base(d);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(d=0;d<this.children.length;d++){var b=this.children[d];"stop"==b.type&&this.stops.push(b)}this.getGradient=function(){};this.createGradient=function(g,m,j){var l=this;this.getHrefAttribute().hasValue()&&(l=this.getHrefAttribute().getDefinition());var k=function(e){return j.hasValue()?(new c.Property("color",e)).addOpacity(j.value).value:e};g=this.getGradient(g,m);if(null==g){return k(l.stops[l.stops.length-1].color)}for(m=0;m<l.stops.length;m++){g.addColorStop(l.stops[m].offset,k(l.stops[m].color))}return this.attribute("gradientTransform").hasValue()?(l=c.ViewPort.viewPorts[0],k=new c.Element.rect,k.attributes.x=new c.Property("x",-c.MAX_VIRTUAL_PIXELS/3),k.attributes.y=new c.Property("y",-c.MAX_VIRTUAL_PIXELS/3),k.attributes.width=new c.Property("width",c.MAX_VIRTUAL_PIXELS),k.attributes.height=new c.Property("height",c.MAX_VIRTUAL_PIXELS),m=new c.Element.g,m.attributes.transform=new c.Property("transform",this.attribute("gradientTransform").value),m.children=[k],k=new c.Element.svg,k.attributes.x=new c.Property("x",0),k.attributes.y=new c.Property("y",0),k.attributes.width=new c.Property("width",l.width),k.attributes.height=new c.Property("height",l.height),k.children=[m],m=document.createElement("canvas"),m.width=l.width,m.height=l.height,l=m.getContext("2d"),l.fillStyle=g,k.render(l),l.createPattern(m,"no-repeat")):g}};c.Element.GradientBase.prototype=new c.Element.ElementBase;c.Element.linearGradient=function(b){this.base=c.Element.GradientBase;this.base(b);this.getGradient=function(h,l){var g=l.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var m="objectBoundingBox"==this.gradientUnits?g.x()+g.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),k="objectBoundingBox"==this.gradientUnits?g.y()+g.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),j="objectBoundingBox"==this.gradientUnits?g.x()+g.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),g="objectBoundingBox"==this.gradientUnits?g.y()+g.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return m==j&&k==g?null:h.createLinearGradient(m,k,j,g)}};c.Element.linearGradient.prototype=new c.Element.GradientBase;c.Element.radialGradient=function(b){this.base=c.Element.GradientBase;this.base(b);this.getGradient=function(h,n){var g=n.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var o="objectBoundingBox"==this.gradientUnits?g.x()+g.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),m="objectBoundingBox"==this.gradientUnits?g.y()+g.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),l=o,j=m;this.attribute("fx").hasValue()&&(l="objectBoundingBox"==this.gradientUnits?g.x()+g.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"));this.attribute("fy").hasValue()&&(j="objectBoundingBox"==this.gradientUnits?g.y()+g.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));g="objectBoundingBox"==this.gradientUnits?(g.width()+g.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return h.createRadialGradient(l,j,0,o,m,g)}};c.Element.radialGradient.prototype=new c.Element.GradientBase;c.Element.stop=function(b){this.base=c.Element.ElementBase;this.base(b);this.offset=this.attribute("offset").numValue();0>this.offset&&(this.offset=0);1<this.offset&&(this.offset=1);b=this.style("stop-color");this.style("stop-opacity").hasValue()&&(b=b.addOpacity(this.style("stop-opacity").value));this.color=b.value};c.Element.stop.prototype=new c.Element.ElementBase;c.Element.AnimateBase=function(b){this.base=c.Element.ElementBase;this.base(b);c.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var e=this.attribute("attributeType").value,f=this.attribute("attributeName").value;return"CSS"==e?this.parent.style(f,!0):this.parent.attribute(f,!0)};this.initialValue=null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(d){null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits());if(this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value){this.duration=0}else{if("remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed){return !1}this.removed=!0;this.getProperty().value=this.initialValue;return !0}}this.duration+=d;d=!1;this.begin<this.duration&&(d=this.calcValue(),this.attribute("type").hasValue()&&(d=this.attribute("type").value+"("+d+")"),this.getProperty().value=d,d=!0);return d};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var g=e.progress*(this.values.value.length-1),j=Math.floor(g),f=Math.ceil(g);e.from=new c.Property("from",parseFloat(this.values.value[j]));e.to=new c.Property("to",parseFloat(this.values.value[f]));e.progress=(g-j)/(f-j)}else{e.from=this.from,e.to=this.to}return e}};c.Element.AnimateBase.prototype=new c.Element.ElementBase;c.Element.animate=function(b){this.base=c.Element.AnimateBase;this.base(b);this.calcValue=function(){var d=this.progress();return d.from.numValue()+(d.to.numValue()-d.from.numValue())*d.progress+this.initialUnits}};c.Element.animate.prototype=new c.Element.AnimateBase;c.Element.animateColor=function(b){this.base=c.Element.AnimateBase;this.base(b);this.calcValue=function(){var g=this.progress(),j=new RGBColor(g.from.value),f=new RGBColor(g.to.value);if(j.ok&&f.ok){var k=j.g+(f.g-j.g)*g.progress,h=j.b+(f.b-j.b)*g.progress;return"rgb("+parseInt(j.r+(f.r-j.r)*g.progress,10)+","+parseInt(k,10)+","+parseInt(h,10)+")"}return this.attribute("from").value}};c.Element.animateColor.prototype=new c.Element.AnimateBase;c.Element.animateTransform=function(b){this.base=c.Element.AnimateBase;this.base(b);this.calcValue=function(){for(var f=this.progress(),k=c.ToNumberArray(f.from.value),l=c.ToNumberArray(f.to.value),g="",j=0;j<k.length;j++){g+=k[j]+(l[j]-k[j])*f.progress+" "}return g}};c.Element.animateTransform.prototype=new c.Element.animate;c.Element.font=function(d){this.base=c.Element.ElementBase;this.base(d);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isArabic=this.isRTL=!1;this.missingGlyph=this.fontFace=null;this.glyphs=[];for(d=0;d<this.children.length;d++){var b=this.children[d];"font-face"==b.type?(this.fontFace=b,b.style("font-family").hasValue()&&(c.Definitions[b.style("font-family").value]=this)):"missing-glyph"==b.type?this.missingGlyph=b:"glyph"==b.type&&(""!=b.arabicForm?(this.isArabic=this.isRTL=!0,"undefined"==typeof this.glyphs[b.unicode]&&(this.glyphs[b.unicode]=[]),this.glyphs[b.unicode][b.arabicForm]=b):this.glyphs[b.unicode]=b)}};c.Element.font.prototype=new c.Element.ElementBase;c.Element.fontface=function(b){this.base=c.Element.ElementBase;this.base(b);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};c.Element.fontface.prototype=new c.Element.ElementBase;c.Element.missingglyph=function(b){this.base=c.Element.path;this.base(b);this.horizAdvX=0};c.Element.missingglyph.prototype=new c.Element.path;c.Element.glyph=function(b){this.base=c.Element.path;this.base(b);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};c.Element.glyph.prototype=new c.Element.path;c.Element.text=function(b){this.captureTextNodes=!0;this.base=c.Element.RenderedElementBase;this.base(b);this.baseSetContext=this.setContext;this.setContext=function(d){this.baseSetContext(d);this.style("dominant-baseline").hasValue()&&(d.textBaseline=this.style("dominant-baseline").value);this.style("alignment-baseline").hasValue()&&(d.textBaseline=this.style("alignment-baseline").value)};this.getBoundingBox=function(){return new c.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(e,this,0);for(var f=0;f<this.children.length;f++){this.renderChild(e,this,f)}};this.getAnchorDelta=function(h,n,g){var o=this.style("text-anchor").valueOrDefault("start");if("start"!=o){for(var m=0,l=g;l<n.children.length;l++){var j=n.children[l];if(l>g&&j.attribute("x").hasValue()){break}m+=j.measureTextRecursive(h)}return -1*("end"==o?m:m/2)}return 0};this.renderChild=function(e,d,g){var f=d.children[g];f.attribute("x").hasValue()?f.x=f.attribute("x").toPixels("x")+this.getAnchorDelta(e,d,g):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),f.attribute("dx").hasValue()&&(this.x+=f.attribute("dx").toPixels("x")),f.x=this.x);this.x=f.x+f.measureText(e);f.attribute("y").hasValue()?f.y=f.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),f.attribute("dy").hasValue()&&(this.y+=f.attribute("dy").toPixels("y")),f.y=this.y);this.y=f.y;f.render(e);for(g=0;g<f.children.length;g++){this.renderChild(e,f,g)}}};c.Element.text.prototype=new c.Element.RenderedElementBase;c.Element.TextElementBase=function(b){this.base=c.Element.RenderedElementBase;this.base(b);this.getGlyph=function(g,d,m){var j=d[m],l=null;if(g.isArabic){var k="isolated";(0==m||" "==d[m-1])&&m<d.length-2&&" "!=d[m+1]&&(k="terminal");0<m&&" "!=d[m-1]&&m<d.length-2&&" "!=d[m+1]&&(k="medial");0<m&&" "!=d[m-1]&&(m==d.length-1||" "==d[m+1])&&(k="initial");"undefined"!=typeof g.glyphs[j]&&(l=g.glyphs[j][k],null==l&&"glyph"==g.glyphs[j].type&&(l=g.glyphs[j]))}else{l=g.glyphs[j]}null==l&&(l=g.missingGlyph);return l};this.renderChildren=function(v){var t=this.parent.style("font-family").getDefinition();if(null!=t){var u=this.parent.style("font-size").numValueOrDefault(c.Font.Parse(c.ctx.font).fontSize),q=this.parent.style("font-style").valueOrDefault(c.Font.Parse(c.ctx.font).fontStyle),s=this.getText();t.isRTL&&(s=s.split("").reverse().join(""));for(var r=c.ToNumberArray(this.parent.attribute("dx").value),o=0;o<s.length;o++){var g=this.getGlyph(t,s,o),j=u/t.fontFace.unitsPerEm;v.translate(this.x,this.y);v.scale(j,-j);var l=v.lineWidth;v.lineWidth=v.lineWidth*t.fontFace.unitsPerEm/u;"italic"==q&&v.transform(1,0,0.4,1,0,0);g.render(v);"italic"==q&&v.transform(1,0,-0.4,1,0,0);v.lineWidth=l;v.scale(1/j,-1/j);v.translate(-this.x,-this.y);this.x+=u*(g.horizAdvX||t.horizAdvX)/t.fontFace.unitsPerEm;"undefined"==typeof r[o]||isNaN(r[o])||(this.x+=r[o])}}else{""!=v.fillStyle&&v.fillText(c.compressSpaces(this.getText()),this.x,this.y),""!=v.strokeStyle&&v.strokeText(c.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureTextRecursive=function(e){for(var d=this.measureText(e),f=0;f<this.children.length;f++){d+=this.children[f].measureTextRecursive(e)}return d};this.measureText=function(g){var o=this.parent.style("font-family").getDefinition();if(null!=o){g=this.parent.style("font-size").numValueOrDefault(c.Font.Parse(c.ctx.font).fontSize);var p=0,l=this.getText();o.isRTL&&(l=l.split("").reverse().join(""));for(var n=c.ToNumberArray(this.parent.attribute("dx").value),m=0;m<l.length;m++){var j=this.getGlyph(o,l,m),p=p+(j.horizAdvX||o.horizAdvX)*g/o.fontFace.unitsPerEm;"undefined"==typeof n[m]||isNaN(n[m])||(p+=n[m])}return p}o=c.compressSpaces(this.getText());if(!g.measureText){return 10*o.length}g.save();this.setContext(g);o=g.measureText(o).width;g.restore();return o}};c.Element.TextElementBase.prototype=new c.Element.RenderedElementBase;c.Element.tspan=function(b){this.captureTextNodes=!0;this.base=c.Element.TextElementBase;this.base(b);this.text=b.nodeValue||b.text||"";this.getText=function(){return this.text}};c.Element.tspan.prototype=new c.Element.TextElementBase;c.Element.tref=function(b){this.base=c.Element.TextElementBase;this.base(b);this.getText=function(){var d=this.getHrefAttribute().getDefinition();if(null!=d){return d.children[0].getText()}}};c.Element.tref.prototype=new c.Element.TextElementBase;c.Element.a=function(d){this.base=c.Element.TextElementBase;this.base(d);this.hasText=!0;for(var b=0;b<d.childNodes.length;b++){3!=d.childNodes[b].nodeType&&(this.hasText=!1)}this.text=this.hasText?d.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var f=new c.Property("fontSize",c.Font.Parse(c.ctx.font).fontSize);c.Mouse.checkBoundingBox(this,new c.BoundingBox(this.x,this.y-f.toPixels("y"),this.x+this.measureText(e),this.y))}else{f=new c.Element.g,f.children=this.children,f.parent=this,f.render(e)}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){c.ctx.canvas.style.cursor="pointer"}};c.Element.a.prototype=new c.Element.TextElementBase;c.Element.image=function(h){this.base=c.Element.RenderedElementBase;this.base(h);var b=this.getHrefAttribute().value,f=b.match(/\.svg$/);c.Images.push(this);this.loaded=!1;if(f){this.img=c.ajax(b),this.loaded=!0}else{this.img=document.createElement("img");var e=this;this.img.onload=function(){e.loaded=!0};this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+b+'" not found'),e.loaded=!0)};this.img.src=b}this.renderChildren=function(d){var m=this.attribute("x").toPixels("x"),j=this.attribute("y").toPixels("y"),l=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y");0!=l&&0!=k&&(d.save(),f?d.drawSvg(this.img,m,j,l,k):(d.translate(m,j),c.AspectRatio(d,this.attribute("preserveAspectRatio").value,l,this.img.width,k,this.img.height,0,0),d.drawImage(this.img,0,0)),d.restore())};this.getBoundingBox=function(){var j=this.attribute("x").toPixels("x"),l=this.attribute("y").toPixels("y"),m=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y");return new c.BoundingBox(j,l,j+m,l+k)}};c.Element.image.prototype=new c.Element.RenderedElementBase;c.Element.g=function(b){this.base=c.Element.RenderedElementBase;this.base(b);this.getBoundingBox=function(){for(var e=new c.BoundingBox,f=0;f<this.children.length;f++){e.addBoundingBox(this.children[f].getBoundingBox())}return e}};c.Element.g.prototype=new c.Element.RenderedElementBase;c.Element.symbol=function(b){this.base=c.Element.RenderedElementBase;this.base(b);this.baseSetContext=this.setContext;this.setContext=function(f){this.baseSetContext(f);if(this.attribute("viewBox").hasValue()){var h=c.ToNumberArray(this.attribute("viewBox").value),j=h[0],g=h[1];width=h[2];height=h[3];c.AspectRatio(f,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,j,g);c.ViewPort.SetCurrent(h[2],h[3])}}};c.Element.symbol.prototype=new c.Element.RenderedElementBase;c.Element.style=function(v){this.base=c.Element.ElementBase;this.base(v);for(var w="",u=0;u<v.childNodes.length;u++){w+=v.childNodes[u].nodeValue}w=w.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");w=c.compressSpaces(w);v=w.split("}");for(u=0;u<v.length;u++){if(""!=c.trim(v[u])){for(var r=v[u].split("{"),w=r[0].split(","),r=r[1].split(";"),t=0;t<w.length;t++){var o=c.trim(w[t]);if(""!=o){for(var s={},q=0;q<r.length;q++){var b=r[q].indexOf(":"),h=r[q].substr(0,b),b=r[q].substr(b+1,r[q].length-b);null!=h&&null!=b&&(s[c.trim(h)]=new c.Property(c.trim(h),c.trim(b)))}c.Styles[o]=s;if("@font-face"==o){for(o=s["font-family"].value.replace(/"/g,""),s=s.src.value.split(","),q=0;q<s.length;q++){if(0<s[q].indexOf('format("svg")')){for(h=s[q].indexOf("url"),b=s[q].indexOf(")",h),h=s[q].substr(h+5,b-h-6),h=c.parseXml(c.ajax(h)).getElementsByTagName("font"),b=0;b<h.length;b++){var j=c.CreateElement(h[b]);c.Definitions[o]=j}}}}}}}}};c.Element.style.prototype=new c.Element.ElementBase;c.Element.use=function(b){this.base=c.Element.RenderedElementBase;this.base(b);this.baseSetContext=this.setContext;this.setContext=function(d){this.baseSetContext(d);this.attribute("x").hasValue()&&d.translate(this.attribute("x").toPixels("x"),0);this.attribute("y").hasValue()&&d.translate(0,this.attribute("y").toPixels("y"))};this.getDefinition=function(){var d=this.getHrefAttribute().getDefinition();this.attribute("width").hasValue()&&(d.attribute("width",!0).value=this.attribute("width").value);this.attribute("height").hasValue()&&(d.attribute("height",!0).value=this.attribute("height").value);return d};this.path=function(e){var d=this.getDefinition();null!=d&&d.path(e)};this.getBoundingBox=function(){var d=this.getDefinition();if(null!=d){return d.getBoundingBox()}};this.renderChildren=function(e){var d=this.getDefinition();if(null!=d){var f=d.parent;d.parent=null;d.render(e);d.parent=f}}};c.Element.use.prototype=new c.Element.RenderedElementBase;c.Element.mask=function(b){this.base=c.Element.ElementBase;this.base(b);this.apply=function(x,v){var w=this.attribute("x").toPixels("x"),u=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),t=this.attribute("height").toPixels("y");if(0==r&&0==t){t=new c.BoundingBox;for(w=0;w<this.children.length;w++){t.addBoundingBox(this.children[w].getBoundingBox())}w=Math.floor(t.x1);u=Math.floor(t.y1);r=Math.floor(t.width());t=Math.floor(t.height())}var s=v.attribute("mask").value;v.attribute("mask").value="";var h=document.createElement("canvas");h.width=w+r;h.height=u+t;var j=h.getContext("2d");this.renderChildren(j);var o=document.createElement("canvas");o.width=w+r;o.height=u+t;var g=o.getContext("2d");v.render(g);g.globalCompositeOperation="destination-in";g.fillStyle=j.createPattern(h,"no-repeat");g.fillRect(0,0,w+r,u+t);x.fillStyle=g.createPattern(o,"no-repeat");x.fillRect(0,0,w+r,u+t);v.attribute("mask").value=s};this.render=function(d){}};c.Element.mask.prototype=new c.Element.ElementBase;c.Element.clipPath=function(b){this.base=c.Element.ElementBase;this.base(b);this.apply=function(f){for(var h=0;h<this.children.length;h++){var j=this.children[h];if("undefined"!=typeof j.path){var g=null;j.attribute("transform").hasValue()&&(g=new c.Transform(j.attribute("transform").value),g.apply(f));j.path(f);f.clip();g&&g.unapply(f)}}};this.render=function(d){}};c.Element.clipPath.prototype=new c.Element.ElementBase;c.Element.filter=function(b){this.base=c.Element.ElementBase;this.base(b);this.apply=function(x,w){var v=w.getBoundingBox(),t=Math.floor(v.x1),o=Math.floor(v.y1),s=Math.floor(v.width()),v=Math.floor(v.height()),r=w.style("filter").value;w.style("filter").value="";for(var g=0,h=0,j=0;j<this.children.length;j++){var d=this.children[j].extraFilterDistance||0,g=Math.max(g,d),h=Math.max(h,d)}d=document.createElement("canvas");d.width=s+2*g;d.height=v+2*h;var y=d.getContext("2d");y.translate(-t+g,-o+h);w.render(y);for(j=0;j<this.children.length;j++){this.children[j].apply(y,0,0,s+2*g,v+2*h)}x.drawImage(d,0,0,s+2*g,v+2*h,t-g,o-h,s+2*g,v+2*h);w.style("filter",!0).value=r};this.render=function(d){}};c.Element.filter.prototype=new c.Element.ElementBase;c.Element.feMorphology=function(b){this.base=c.Element.ElementBase;this.base(b);this.apply=function(g,d,j,h,f){}};c.Element.feMorphology.prototype=new c.Element.ElementBase;c.Element.feColorMatrix=function(b){this.base=c.Element.ElementBase;this.base(b);this.apply=function(h,d,o,n,g){var m=h.getImageData(0,0,n,g);for(o=0;o<g;o++){for(d=0;d<n;d++){var j=(m.data[o*n*4+4*d+0]+m.data[o*n*4+4*d+1]+m.data[o*n*4+4*d+2])/3;m.data[o*n*4+4*d+0]=j;m.data[o*n*4+4*d+1]=j;m.data[o*n*4+4*d+2]=j}}h.clearRect(0,0,n,g);h.putImageData(m,0,0)}};c.Element.feColorMatrix.prototype=new c.Element.ElementBase;c.Element.feGaussianBlur=function(b){this.base=c.Element.ElementBase;this.base(b);this.extraFilterDistance=this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.apply=function(g,j,k,h,f){"undefined"==typeof stackBlurCanvasRGBA?"undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work"):(g.canvas.id=c.UniqueId(),g.canvas.style.display="none",document.body.appendChild(g.canvas),stackBlurCanvasRGBA(g.canvas.id,j,k,h,f,this.blurRadius),document.body.removeChild(g.canvas))}};c.Element.feGaussianBlur.prototype=new c.Element.ElementBase;c.Element.title=function(d){};c.Element.title.prototype=new c.Element.ElementBase;c.Element.desc=function(d){};c.Element.desc.prototype=new c.Element.ElementBase;c.Element.MISSING=function(d){"undefined"!=typeof console&&console.log("ERROR: Element '"+d.nodeName+"' not yet implemented.")};c.Element.MISSING.prototype=new c.Element.ElementBase;c.CreateElement=function(f){var b=f.nodeName.replace(/^[^:]+:/,""),b=b.replace(/\-/g,""),e=null,e="undefined"!=typeof c.Element[b]?new c.Element[b](f):new c.Element.MISSING(f);e.type=f.nodeName;return e};c.load=function(d,b){c.loadXml(d,c.ajax(b))};c.loadXml=function(d,b){c.loadXmlDoc(d,c.parseXml(b))};c.loadXmlDoc=function(o,g){c.init(o);var n=function(e){for(var d=o.canvas;d;){e.x-=d.offsetLeft,e.y-=d.offsetTop,d=d.offsetParent}window.scrollX&&(e.x+=window.scrollX);window.scrollY&&(e.y+=window.scrollY);return e};!0!=c.opts.ignoreMouse&&(o.canvas.onclick=function(d){d=n(new c.Point(null!=d?d.clientX:event.clientX,null!=d?d.clientY:event.clientY));c.Mouse.onclick(d.x,d.y)},o.canvas.onmousemove=function(d){d=n(new c.Point(null!=d?d.clientX:event.clientX,null!=d?d.clientY:event.clientY));c.Mouse.onmousemove(d.x,d.y)});var m=c.CreateElement(g.documentElement),j=m.root=!0,b=function(){c.ViewPort.Clear();o.canvas.parentNode&&c.ViewPort.SetCurrent(o.canvas.parentNode.clientWidth,o.canvas.parentNode.clientHeight);!0!=c.opts.ignoreDimensions&&(m.style("width").hasValue()&&(o.canvas.width=m.style("width").toPixels("x"),o.canvas.style.width=o.canvas.width+"px"),m.style("height").hasValue()&&(o.canvas.height=m.style("height").toPixels("y"),o.canvas.style.height=o.canvas.height+"px"));var s=o.canvas.clientWidth||o.canvas.width,r=o.canvas.clientHeight||o.canvas.height;!0==c.opts.ignoreDimensions&&m.style("width").hasValue()&&m.style("height").hasValue()&&(s=m.style("width").toPixels("x"),r=m.style("height").toPixels("y"));c.ViewPort.SetCurrent(s,r);null!=c.opts.offsetX&&(m.attribute("x",!0).value=c.opts.offsetX);null!=c.opts.offsetY&&(m.attribute("y",!0).value=c.opts.offsetY);if(null!=c.opts.scaleWidth&&null!=c.opts.scaleHeight){var h=1,e=1,p=c.ToNumberArray(m.attribute("viewBox").value);m.attribute("width").hasValue()?h=m.attribute("width").toPixels("x")/c.opts.scaleWidth:isNaN(p[2])||(h=p[2]/c.opts.scaleWidth);m.attribute("height").hasValue()?e=m.attribute("height").toPixels("y")/c.opts.scaleHeight:isNaN(p[3])||(e=p[3]/c.opts.scaleHeight);m.attribute("width",!0).value=c.opts.scaleWidth;m.attribute("height",!0).value=c.opts.scaleHeight;m.attribute("viewBox",!0).value="0 0 "+s*h+" "+r*e;m.attribute("preserveAspectRatio",!0).value="none"}!0!=c.opts.ignoreClear&&o.clearRect(0,0,s,r);m.render(o);j&&(j=!1,"function"==typeof c.opts.renderCallback&&c.opts.renderCallback(g))},k=!0;c.ImagesLoaded()&&(k=!1,b());c.intervalID=setInterval(function(){var e=!1;k&&c.ImagesLoaded()&&(k=!1,e=!0);!0!=c.opts.ignoreMouse&&(e|=c.Mouse.hasEvents());if(!0!=c.opts.ignoreAnimation){for(var f=0;f<c.Animations.length;f++){e|=c.Animations[f].update(1000/c.FRAMERATE)}}"function"==typeof c.opts.forceRedraw&&!0==c.opts.forceRedraw()&&(e=!0);e&&(b(),c.Mouse.runEvents())},1000/c.FRAMERATE)};c.stop=function(){c.intervalID&&clearInterval(c.intervalID)};c.Mouse=new function(){this.events=[];this.hasEvents=function(){return 0!=this.events.length};this.onclick=function(d,e){this.events.push({type:"onclick",x:d,y:e,run:function(b){if(b.onclick){b.onclick()}}})};this.onmousemove=function(d,e){this.events.push({type:"onmousemove",x:d,y:e,run:function(b){if(b.onmousemove){b.onmousemove()}}})};this.eventElements=[];this.checkPath=function(f,g){for(var j=0;j<this.events.length;j++){var h=this.events[j];g.isPointInPath&&g.isPointInPath(h.x,h.y)&&(this.eventElements[j]=f)}};this.checkBoundingBox=function(f,g){for(var j=0;j<this.events.length;j++){var h=this.events[j];g.isPointInBox(h.x,h.y)&&(this.eventElements[j]=f)}};this.runEvents=function(){c.ctx.canvas.style.cursor="";for(var f=0;f<this.events.length;f++){for(var b=this.events[f],e=this.eventElements[f];e;){b.run(e),e=e.parent}}this.events=[];this.eventElements=[]}};return c}this.canvg=function(e,k,f){if(null==e&&null==k&&null==f){k=document.getElementsByTagName("svg");for(var j=0;j<k.length;j++){e=k[j];f=document.createElement("canvas");f.width=e.clientWidth;f.height=e.clientHeight;e.parentNode.insertBefore(f,e);e.parentNode.removeChild(e);var h=document.createElement("div");h.appendChild(e);canvg(f,h.innerHTML)}}else{f=f||{};"string"==typeof e&&(e=document.getElementById(e));null!=e.svg&&e.svg.stop();j=a();if(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName){e.svg=j}j.opts=f;e=e.getContext("2d");"undefined"!=typeof k.documentElement?j.loadXmlDoc(e,k):"<"==k.substr(0,1)?j.loadXml(e,k):j.load(e,k)}}})();"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(h,f,k,g,j){canvg(this.canvas,h,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:f,offsetY:k,scaleWidth:g,scaleHeight:j})});if(AmCharts.isModern){var saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(w){var z=w.document,y=w.URL||w.webkitURL||w,A=z.createElementNS("http://www.w3.org/1999/xhtml","a"),x=!w.externalHost&&"download" in A,u=w.webkitRequestFileSystem,t=w.requestFileSystem||u||w.mozRequestFileSystem,r=function(b){(w.setImmediate||w.setTimeout)(function(){throw b},0)},v=0,s=[],j=function(h,g,m){g=[].concat(g);for(var n=g.length;n--;){var l=h["on"+g[n]];if("function"===typeof l){try{l.call(h,m||h)}catch(k){r(k)}}}},o=function(h,g){var f=this,e=h.type,p=!1,k,J,a=function(){var c=(w.URL||w.webkitURL||w).createObjectURL(h);s.push(c);return c},F=function(){j(f,["writestart","progress","write","writeend"])},d=function(){if(p||!k){k=a(h)}J?J.location.href=k:window.open(k,"_blank");f.readyState=f.DONE;F()},I=function(c){return function(){if(f.readyState!==f.DONE){return c.apply(this,arguments)}}},b={create:!0,exclusive:!1},G;f.readyState=f.INIT;g||(g="download");if(x){k=a(h),z=w.document,A=z.createElementNS("http://www.w3.org/1999/xhtml","a"),A.href=k,A.download=g,e=z.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!1,w,0,0,0,0,0,!1,!1,!1,!1,0,null),A.dispatchEvent(e),f.readyState=f.DONE,F()}else{w.chrome&&e&&"application/octet-stream"!==e&&(G=h.slice||h.webkitSlice,h=G.call(h,0,h.size,"application/octet-stream"),p=!0);u&&"download"!==g&&(g+=".download");if("application/octet-stream"===e||u){J=w}t?(v+=h.size,t(w.TEMPORARY,v,I(function(c){c.root.getDirectory("saved",b,I(function(m){var l=function(){m.getFile(g,b,I(function(n){n.createWriter(I(function(B){B.onwriteend=function(C){J.location.href=n.toURL();s.push(n);f.readyState=f.DONE;j(f,"writeend",C)};B.onerror=function(){var C=B.error;C.code!==C.ABORT_ERR&&d()};["writestart","progress","write","abort"].forEach(function(C){B["on"+C]=f["on"+C]});B.write(h);f.abort=function(){B.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),d)}),d)};m.getFile(g,{create:!1},I(function(n){n.remove();l()}),I(function(n){n.code===n.NOT_FOUND_ERR?l():d()}))}),d)}),d)):d()}},q=o.prototype;q.abort=function(){this.readyState=this.DONE;j(this,"abort")};q.readyState=q.INIT=0;q.WRITING=1;q.DONE=2;q.error=q.onwritestart=q.onprogress=q.onwrite=q.onabort=q.onerror=q.onwriteend=null;w.addEventListener("unload",function(){for(var d=s.length;d--;){var c=s[d];"string"===typeof c?y.revokeObjectURL(c):c.remove()}s.length=0},!1);return function(d,c){return new o(d,c)}}(this.self||this.window||this.content);"undefined"!==typeof module&&(module.exports=saveAs)}function RGBColor(k){this.ok=!1;"#"==k.charAt(0)&&(k=k.substr(1,6));k=k.replace(/ /g,"");k=k.toLowerCase();var f={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},m;for(m in f){k==m&&(k=f[m])}var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(b){return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(b){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(b){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}}];for(m=0;m<h.length;m++){var l=h[m].process,j=h[m].re.exec(k);j&&(channels=l(j),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=0>this.g||isNaN(this.g)?0:255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var e=this.r.toString(16),c=this.g.toString(16),g=this.b.toString(16);1==e.length&&(e="0"+e);1==c.length&&(c="0"+c);1==g.length&&(g="0"+g);return"#"+e+c+g};this.getHelpXML=function(){for(var w=[],x=0;x<h.length;x++){for(var t=h[x].example,s=0;s<t.length;s++){w[w.length]=t[s]}}for(var b in f){w[w.length]=b}t=document.createElement("ul");t.setAttribute("id","rgbcolor-examples");for(x=0;x<w.length;x++){try{var o=document.createElement("li"),r=new RGBColor(w[x]),a=document.createElement("div");a.style.cssText="margin: 3px; border: 1px solid black; background:"+r.toHex()+"; color:"+r.toHex();a.appendChild(document.createTextNode("test"));var z=document.createTextNode(" "+w[x]+" -> "+r.toRGB()+" -> "+r.toHex());o.appendChild(a);o.appendChild(z);t.appendChild(o)}catch(y){}}return t}}var jsPDF=function(){function d(aH,aG,aE,aD){aH="undefined"===typeof aH?"p":aH.toString().toLowerCase();"undefined"===typeof aG&&(aG="mm");"undefined"===typeof aE&&(aE="a4");"undefined"===typeof aD&&"undefined"===typeof zpipe&&(aD=!1);var aB=aE.toString().toLowerCase(),aF=[],aC=0,ay=aD;aD={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]};var az="0 g",aA=0,ax=[],at=2,ar=!1,am=[],ap={},an={},ai=16,aj,aq,al,av,ak={title:"",subject:"",author:"",keywords:"",creator:""},af=0,Y=0,ao={},ah=new f(ao),ad,au=function(g){return g.toFixed(2)},ac=function(h){var g=h.toFixed(0);return 10>h?"0"+g:g},aw=function(g){ar?ax[aA].push(g):(aF.push(g),aC+=g.length+1)},ae=function(){at++;am[at]=aC;aw(at+" 0 obj");return at},W=function(g){aw("stream");aw(g);aw("endstream")},o,j,aa,ag=function(w,v){var t;t=w;var u=v,s,r,q,p,n,m;void 0===u&&(u={});s=u.sourceEncoding?s:"Unicode";q=u.outputEncoding;if((u.autoencode||q)&&ap[aj].metadata&&ap[aj].metadata[s]&&ap[aj].metadata[s].encoding&&(s=ap[aj].metadata[s].encoding,!q&&ap[aj].encoding&&(q=ap[aj].encoding),!q&&s.codePages&&(q=s.codePages[0]),"string"===typeof q&&(q=s[q]),q)){n=!1;p=[];s=0;for(r=t.length;s<r;s++){(m=q[t.charCodeAt(s)])?p.push(String.fromCharCode(m)):p.push(t[s]),p[s].charCodeAt(0)>>8&&(n=!0)}t=p.join("")}for(s=t.length;void 0===n&&0!==s;){t.charCodeAt(s-1)>>8&&(n=!0),s--}if(n){p=u.noBOM?[]:[254,255];s=0;for(r=t.length;s<r;s++){m=t.charCodeAt(s);u=m>>8;if(u>>8){throw Error("Character at position "+s.toString(10)+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE")}p.push(u);p.push(m-(u<<8))}t=String.fromCharCode.apply(void 0,p)}return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},e=function(){aA++;ar=!0;ax[aA]=[];aw(au(0.200025*av)+" w");aw("0 G");0!==af&&aw(af.toString(10)+" J");0!==Y&&aw(Y.toString(10)+" j");ah.publish("addPage",{pageNumber:aA})},X=function(h,g){var k;void 0===h&&(h=ap[aj].fontName);void 0===g&&(g=ap[aj].fontStyle);try{k=an[h][g]}catch(l){k=void 0}if(!k){throw Error("Unable to look up font label for font '"+h+"', '"+g+"'. Refer to getFontList() for available fonts.")}return k},ab=function(){ar=!1;aF=[];am=[];aw("%PDF-1.3");o=al*av;j=aq*av;var l,k,q,r,p;for(l=1;l<=aA;l++){ae();aw("<</Type /Page");aw("/Parent 1 0 R");aw("/Resources 2 0 R");aw("/Contents "+(at+1)+" 0 R>>");aw("endobj");k=ax[l].join("\n");ae();if(ay){q=[];for(r=0;r<k.length;++r){q[r]=k.charCodeAt(r)}p=adler32cs.from(k);k=new Deflater(6);k.append(new Uint8Array(q));k=k.flush();q=[new Uint8Array([120,156]),new Uint8Array(k),new Uint8Array([p&255,p>>8&255,p>>16&255,p>>24&255])];k="";for(r in q){q.hasOwnProperty(r)&&(k+=String.fromCharCode.apply(null,q[r]))}aw("<</Length "+k.length+" /Filter [/FlateDecode]>>")}else{aw("<</Length "+k.length+">>")}W(k);aw("endobj")}am[1]=aC;aw("1 0 obj");aw("<</Type /Pages");aa="/Kids [";for(r=0;r<aA;r++){aa+=3+2*r+" 0 R "}aw(aa+"]");aw("/Count "+aA);aw("/MediaBox [0 0 "+au(o)+" "+au(j)+"]");aw(">>");aw("endobj");for(var n in ap){ap.hasOwnProperty(n)&&(l=ap[n],l.objectNumber=ae(),aw("<</BaseFont/"+l.PostScriptName+"/Type/Font"),"string"===typeof l.encoding&&aw("/Encoding/"+l.encoding),aw("/Subtype/Type1>>"),aw("endobj"))}ah.publish("putResources");am[2]=aC;aw("2 0 obj");aw("<<");aw("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");aw("/Font <<");for(var m in ap){ap.hasOwnProperty(m)&&aw("/"+m+" "+ap[m].objectNumber+" 0 R")}aw(">>");aw("/XObject <<");ah.publish("putXobjectDict");aw(">>");aw(">>");aw("endobj");ah.publish("postPutResources");ae();aw("<<");aw("/Producer (jsPDF 0.9.0rc2)");ak.title&&aw("/Title ("+ag(ak.title)+")");ak.subject&&aw("/Subject ("+ag(ak.subject)+")");ak.author&&aw("/Author ("+ag(ak.author)+")");ak.keywords&&aw("/Keywords ("+ag(ak.keywords)+")");ak.creator&&aw("/Creator ("+ag(ak.creator)+")");n=new Date;aw("/CreationDate (D:"+[n.getFullYear(),ac(n.getMonth()+1),ac(n.getDate()),ac(n.getHours()),ac(n.getMinutes()),ac(n.getSeconds())].join("")+")");aw(">>");aw("endobj");ae();aw("<<");aw("/Type /Catalog");aw("/Pages 1 0 R");aw("/OpenAction [3 0 R /FitH null]");aw("/PageLayout /OneColumn");ah.publish("putCatalog");aw(">>");aw("endobj");n=aC;aw("xref");aw("0 "+(at+1));aw("0000000000 65535 f ");for(m=1;m<=at;m++){l=am[m].toFixed(0),l=10>l.length?Array(11-l.length).join("0")+l:l,aw(l+" 00000 n ")}aw("trailer");aw("<<");aw("/Size "+(at+1));aw("/Root "+at+" 0 R");aw("/Info "+(at-1)+" 0 R");aw(">>");aw("startxref");aw(n);aw("%%EOF");ar=!0;return aF.join("\n")},Z=function(h){var g="S";if("F"===h){g="f"}else{if("FD"===h||"DF"===h){g="B"}}return g},c=function(k,h){var n,p,m,l;switch(k){case void 0:return ab();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL)){return ao.output("dataurlnewwindow")}n=ab();p=n.length;m=new Uint8Array(new ArrayBuffer(p));for(l=0;l<p;l++){m[l]=n.charCodeAt(l)}n=new Blob([m],{type:"application/pdf"});saveAs(n,h);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(ab());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(ab());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(ab()));break;default:throw Error('Output type "'+k+'" is not supported.')}};if("pt"===aG){av=1}else{if("mm"===aG){av=72/25.4}else{if("cm"===aG){av=72/2.54}else{if("in"===aG){av=72}else{throw"Invalid unit: "+aG}}}}if(aD.hasOwnProperty(aB)){aq=aD[aB][1]/av,al=aD[aB][0]/av}else{try{aq=aE[1],al=aE[0]}catch(b){throw"Invalid format: "+aE}}if("p"===aH||"portrait"===aH){aH="p",al>aq&&(aH=al,al=aq,aq=aH)}else{if("l"===aH||"landscape"===aH){aH="l",aq>al&&(aH=al,al=aq,aq=aH)}else{throw"Invalid orientation: "+aH}}ao.internal={pdfEscape:ag,getStyle:Z,getFont:function(){return ap[X.apply(ao,arguments)]},getFontSize:function(){return ai},getLineHeight:function(){return 1.15*ai},btoa:btoa,write:function(h,g,k,l){aw(1===arguments.length?h:Array.prototype.join.call(arguments," "))},getCoordinateString:function(g){return au(g*av)},getVerticalCoordinateString:function(g){return au((aq-g)*av)},collections:{},newObject:ae,putStream:W,events:ah,scaleFactor:av,pageSize:{width:al,height:aq},output:function(h,g){return c(h,g)},getNumberOfPages:function(){return ax.length-1},pages:ax};ao.addPage=function(){e();return this};ao.text=function(k,h,n,p){var m,l;"number"===typeof k&&(m=k,l=h,k=n,h=m,n=l);"string"===typeof k&&k.match(/[\n\r]/)&&(k=k.split(/\r\n|\r|\n/g));"undefined"===typeof p?p={noBOM:!0,autoencode:!0}:(void 0===p.noBOM&&(p.noBOM=!0),void 0===p.autoencode&&(p.autoencode=!0));if("string"===typeof k){p=ag(k,p)}else{if(k instanceof Array){k=k.concat();for(m=k.length-1;-1!==m;m--){k[m]=ag(k[m],p)}p=k.join(") Tj\nT* (")}else{throw Error('Type of text must be string or Array. "'+k+'" is not recognized.')}}aw("BT\n/"+aj+" "+ai+" Tf\n"+1.15*ai+" TL\n"+az+"\n"+au(h*av)+" "+au((aq-n)*av)+" Td\n("+p+") Tj\nET");return this};ao.line=function(h,g,k,l){aw(au(h*av)+" "+au((aq-g)*av)+" m "+au(k*av)+" "+au((aq-l)*av)+" l S");return this};ao.lines=function(E,D,B,C,A,y){var z,x,w,v,u,t,r,s;"number"===typeof E&&(z=E,x=D,E=B,D=z,B=x);A=Z(A);C=void 0===C?[1,1]:C;aw((D*av).toFixed(3)+" "+((aq-B)*av).toFixed(3)+" m ");z=C[0];C=C[1];x=E.length;s=B;for(B=0;B<x;B++){w=E[B],2===w.length?(D=w[0]*z+D,s=w[1]*C+s,aw((D*av).toFixed(3)+" "+((aq-s)*av).toFixed(3)+" l")):(v=w[0]*z+D,u=w[1]*C+s,t=w[2]*z+D,r=w[3]*C+s,D=w[4]*z+D,s=w[5]*C+s,aw((v*av).toFixed(3)+" "+((aq-u)*av).toFixed(3)+" "+(t*av).toFixed(3)+" "+((aq-r)*av).toFixed(3)+" "+(D*av).toFixed(3)+" "+((aq-s)*av).toFixed(3)+" c"))}!0==y&&aw(" h");aw(A);return this};ao.rect=function(h,g,l,m,k){k=Z(k);aw([au(h*av),au((aq-g)*av),au(l*av),au(-m*av),"re",k].join(" "));return this};ao.triangle=function(k,h,p,q,n,l,m){this.lines([[p-k,q-h],[n-p,l-q],[k-n,h-l]],k,h,[1,1],m,!0);return this};ao.roundedRect=function(l,k,r,s,q,n,p){var m=4/3*(Math.SQRT2-1);this.lines([[r-2*q,0],[q*m,0,q,n-n*m,q,n],[0,s-2*n],[0,n*m,-(q*m),n,-q,n],[-r+2*q,0],[-(q*m),0,-q,-(n*m),-q,-n],[0,-s+2*n],[0,-(n*m),q*m,-n,q,-n]],l+q,k,[1,1],p);return this};ao.ellipse=function(k,h,p,q,n){n=Z(n);var l=4/3*(Math.SQRT2-1)*p,m=4/3*(Math.SQRT2-1)*q;aw([au((k+p)*av),au((aq-h)*av),"m",au((k+p)*av),au((aq-(h-m))*av),au((k+l)*av),au((aq-(h-q))*av),au(k*av),au((aq-(h-q))*av),"c"].join(" "));aw([au((k-l)*av),au((aq-(h-q))*av),au((k-p)*av),au((aq-(h-m))*av),au((k-p)*av),au((aq-h)*av),"c"].join(" "));aw([au((k-p)*av),au((aq-(h+m))*av),au((k-l)*av),au((aq-(h+q))*av),au(k*av),au((aq-(h+q))*av),"c"].join(" "));aw([au((k+l)*av),au((aq-(h+q))*av),au((k+p)*av),au((aq-(h+m))*av),au((k+p)*av),au((aq-h)*av),"c",n].join(" "));return this};ao.circle=function(h,g,k,l){return this.ellipse(h,g,k,k,l)};ao.setProperties=function(h){for(var g in ak){ak.hasOwnProperty(g)&&h[g]&&(ak[g]=h[g])}return this};ao.setFontSize=function(g){ai=g;return this};ao.setFont=function(h,g){aj=X(h,g);return this};ao.setFontStyle=ao.setFontType=function(g){aj=X(void 0,g);return this};ao.getFontList=function(){var h={},g,k,l;for(g in an){if(an.hasOwnProperty(g)){for(k in h[g]=l=[],an[g]){an[g].hasOwnProperty(k)&&l.push(k)}}}return h};ao.setLineWidth=function(g){aw((g*av).toFixed(2)+" w");return this};ao.setDrawColor=function(h,g,k,l){h=void 0===g||void 0===l&&h===g===k?"string"===typeof h?h+" G":au(h/255)+" G":void 0===l?"string"===typeof h?[h,g,k,"RG"].join(" "):[au(h/255),au(g/255),au(k/255),"RG"].join(" "):"string"===typeof h?[h,g,k,l,"K"].join(" "):[au(h),au(g),au(k),au(l),"K"].join(" ");aw(h);return this};ao.setFillColor=function(h,g,k,l){h=void 0===g||void 0===l&&h===g===k?"string"===typeof h?h+" g":au(h/255)+" g":void 0===l?"string"===typeof h?[h,g,k,"rg"].join(" "):[au(h/255),au(g/255),au(k/255),"rg"].join(" "):"string"===typeof h?[h,g,k,l,"k"].join(" "):[au(h),au(g),au(k),au(l),"k"].join(" ");aw(h);return this};ao.setTextColor=function(h,g,k){var l=/#[0-9A-Fa-f]{6}/;"string"==typeof h&&l.test(h)&&(h=h.replace("#",""),k=parseInt(h,16),h=k>>16&255,g=k>>8&255,k&=255);az=0===h&&0===g&&0===k||"undefined"===typeof g?(h/255).toFixed(3)+" g":[(h/255).toFixed(3),(g/255).toFixed(3),(k/255).toFixed(3),"rg"].join(" ");return this};ao.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};ao.setLineCap=function(h){var g=this.CapJoinStyles[h];if(void 0===g){throw Error("Line cap style of '"+h+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}af=g;aw(g.toString(10)+" J");return this};ao.setLineJoin=function(h){var g=this.CapJoinStyles[h];if(void 0===g){throw Error("Line join style of '"+h+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}Y=g;aw(g.toString(10)+" j");return this};ao.output=c;ao.save=function(g){ao.output("save",g)};for(ad in d.API){d.API.hasOwnProperty(ad)&&("events"===ad&&d.API.events.length?function(h,g){var l,m,k;for(k=g.length-1;-1!==k;k--){l=g[k][0],m=g[k][1],h.subscribe.apply(h,[l].concat("function"===typeof m?[m]:m))}}(ah,d.API.events):ao[ad]=d.API[ad])}(function(){var l=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],s,t,r,p;s=0;for(t=l.length;s<t;s++){var q=l[s][0],n=l[s][1];r=l[s][2];p="F"+(a(ap)+1).toString(10);var q=ap[p]={id:p,PostScriptName:q,fontName:n,fontStyle:r,encoding:"StandardEncoding",metadata:{}},m=p;void 0===an[n]&&(an[n]={});an[n][r]=m;ah.publish("addFont",q);r=p;p=l[s][0].split("-");q=p[0];p=p[1]||"";void 0===an[q]&&(an[q]={});an[q][p]=r}ah.publish("addFonts",{fonts:ap,dictionary:an})})();aj="F1";e();ah.publish("initialized");return ao}"undefined"===typeof btoa&&(window.btoa=function(t){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),r,q,j,o,m=0,g=0,h="",h=[];do{r=t.charCodeAt(m++),q=t.charCodeAt(m++),j=t.charCodeAt(m++),o=r<<16|q<<8|j,r=o>>18&63,q=o>>12&63,j=o>>6&63,o&=63,h[g++]=s[r]+s[q]+s[j]+s[o]}while(m<t.length);h=h.join("");t=t.length%3;return(t?h.slice(0,t-3):h)+"===".slice(t||3)});"undefined"===typeof atob&&(window.atob=function(t){var s,r,q,j,o,m=0,g=0;j="";var h=[];if(!t){return t}t+="";do{s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++)),j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++)),q=s<<18|r<<12|j<<6|o,s=q>>16&255,r=q>>8&255,q&=255,64===j?h[g++]=String.fromCharCode(s):64===o?h[g++]=String.fromCharCode(s,r):h[g++]=String.fromCharCode(s,r,q)}while(m<t.length);return j=h.join("")});var a="function"===typeof Object.keys?function(b){return Object.keys(b).length}:function(g){var e=0,h;for(h in g){g.hasOwnProperty(h)&&e++}return e},f=function(b){this.topics={};this.context=b;this.publish=function(t,s){if(this.topics[t]){var r=this.topics[t],q=[],o,l,g,h,j=function(){};s=Array.prototype.slice.call(arguments,1);l=0;for(g=r.length;l<g;l++){h=r[l],o=h[0],h[1]&&(h[0]=j,q.push(l)),o.apply(this.context,s)}l=0;for(g=q.length;l<g;l++){r.splice(q[l],1)}}};this.subscribe=function(g,e,h){this.topics[g]?this.topics[g].push([e,h]):this.topics[g]=[[e,h]];return{topic:g,callback:e}};this.unsubscribe=function(h){if(this.topics[h.topic]){var g=this.topics[h.topic],k,j;k=0;for(j=g.length;k<j;k++){g[k][0]===h.callback&&g.splice(k,1)}}}};d.API={events:[]};return d}();(function(d){var a=function(){var j=this.internal.collections.addImage_images,g;for(g in j){var r=j[g],q=this.internal.newObject(),h=this.internal.write,n=this.internal.putStream;r.n=q;h("<</Type /XObject");h("/Subtype /Image");h("/Width "+r.w);h("/Height "+r.h);"Indexed"===r.cs?h("/ColorSpace [/Indexed /DeviceRGB "+(r.pal.length/3-1)+" "+(q+1)+" 0 R]"):(h("/ColorSpace /"+r.cs),"DeviceCMYK"===r.cs&&h("/Decode [1 0 1 0 1 0 1 0]"));h("/BitsPerComponent "+r.bpc);"f" in r&&h("/Filter /"+r.f);"dp" in r&&h("/DecodeParms <<"+r.dp+">>");if("trns" in r&&r.trns.constructor==Array){for(var m="",o=0;o<r.trns.length;o++){m+=r[m][o]+" "+r.trns[o]+" ",h("/Mask ["+m+"]")}}"smask" in r&&h("/SMask "+(q+1)+" 0 R");h("/Length "+r.data.length+">>");n(r.data);h("endobj")}},f=function(){var h=this.internal.collections.addImage_images,g=this.internal.write,k,j;for(j in h){k=h[j],g("/I"+k.i,k.n,"0","R")}};d.addImage=function(y,x,w,s,o,t){if("object"===typeof y&&1===y.nodeType){x=document.createElement("canvas");x.width=y.clientWidth;x.height=y.clientHeight;var r=x.getContext("2d");if(!r){throw"addImage requires canvas to be supported by browser."}r.drawImage(y,0,0,x.width,x.height);y=x.toDataURL("image/jpeg");x="JPEG"}if("JPEG"!==x.toUpperCase()){throw Error("addImage currently only supports format 'JPEG', not '"+x+"'")}var c;x=this.internal.collections.addImage_images;var r=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;"data:image/jpeg;base64,"===y.substring(0,23)&&(y=atob(y.replace("data:image/jpeg;base64,","")));if(x){if(Object.keys){c=Object.keys(x).length}else{var j=x,b=0;for(c in j){j.hasOwnProperty(c)&&b++}c=b}}else{c=0,this.internal.collections.addImage_images=x={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",f)}y:{var j=y,A;if(255===!j.charCodeAt(0)||216===!j.charCodeAt(1)||255===!j.charCodeAt(2)||224===!j.charCodeAt(3)||74===!j.charCodeAt(6)||70===!j.charCodeAt(7)||73===!j.charCodeAt(8)||70===!j.charCodeAt(9)||0===!j.charCodeAt(10)){throw Error("getJpegSize requires a binary jpeg file")}A=256*j.charCodeAt(4)+j.charCodeAt(5);for(var b=4,z=j.length;b<z;){b+=A;if(255!==j.charCodeAt(b)){throw Error("getJpegSize could not find the size of the image")}if(192===j.charCodeAt(b+1)||193===j.charCodeAt(b+1)||194===j.charCodeAt(b+1)||195===j.charCodeAt(b+1)||196===j.charCodeAt(b+1)||197===j.charCodeAt(b+1)||198===j.charCodeAt(b+1)||199===j.charCodeAt(b+1)){A=256*j.charCodeAt(b+5)+j.charCodeAt(b+6);j=256*j.charCodeAt(b+7)+j.charCodeAt(b+8);j=[j,A];break y}b+=2;A=256*j.charCodeAt(b)+j.charCodeAt(b+1)}j=void 0}y={w:j[0],h:j[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:c,data:y};x[c]=y;o||t||(t=o=-96);0>o&&(o=-72*y.w/o/this.internal.scaleFactor);0>t&&(t=-72*y.h/t/this.internal.scaleFactor);0===o&&(o=t*y.w/y.h);0===t&&(t=o*y.h/y.w);this.internal.write("q",r(o),"0 0",r(t),r(w),g(s+t),"cm /I"+y.i,"Do Q");return this}})(jsPDF.API);